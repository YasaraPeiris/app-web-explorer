(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0ad8":function(e,t,s){},"1e3b":function(e,t,s){},2469:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style info-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[e._v("Access Info Panel")])]),s("b-col",{staticClass:"px-0 float-right",attrs:{cols:"2"}},[e.infoJSON?s("PryvBtn",{staticClass:"mt-0 mr-0",attrs:{content:"Back",icon:"arrow-left"},on:{click:e.backToEvents}}):e._e(),s("PryvBtn",{staticClass:"mt-0",attrs:{id:"submitBtn",icon:"plus",content:"Stream"},on:{click:function(t){return e.$bvModal.show("modal-scoped-stream")}}}),s("AddStreamModal")],1)],1)],1),s("div",[e.infoJSON?s("b-card",{staticClass:"text-info"},[s("vue-json-pretty",{attrs:{path:"res",data:this.infoJSON}}),s("b-row",{staticClass:"justify-content-center"},[s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Disconnect",icon:"power"},on:{click:e.logout}})],1)],1):s("b-card",{staticClass:"text-info"},[e._v(" Please select an endpoint to view the access data ")])],1)])])},a=[],i=s("2f62"),r=s("d538"),o=s.n(r),l=s("b707"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"modal",attrs:{id:"modal-scoped-stream"},on:{hidden:e.resetModal,ok:e.handleOk,show:e.resetModal},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h5",[e._v("Add a new stream")])]},proxy:!0},{key:"default",fn:function(){return[s("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[s("b-form-group",{attrs:{label:"ID","label-for":"input-id"}},[s("b-form-input",{attrs:{type:"text",id:"input-id",placeholder:"Enter ID"},model:{value:e.selectedId,callback:function(t){e.selectedId=t},expression:"selectedId"}})],1),s("b-form-group",{attrs:{label:"Parent *","label-for":"input-stream"}},[s("b-form-input",{attrs:{placeholder:"Select a stream",list:"input-stream-list",id:"input-stream",autocomplete:"off"},model:{value:e.selectedParentId,callback:function(t){e.selectedParentId=t},expression:"selectedParentId"}}),s("b-form-datalist",{attrs:{id:"input-stream-list",options:e.streamNames}})],1),s("b-form-group",{attrs:{label:"Name *","label-for":"input-name",state:e.nameState,"invalid-feedback":"Name is required"}},[s("b-form-input",{attrs:{type:"text",value:e.selectedName,id:"input-name",placeholder:"Enter name",required:"",state:e.nameState},on:{input:e.setName}})],1),s("b-form-group",{attrs:{label:"Client Data","label-for":"input-client-data"}},[s("v-jsoneditor",{attrs:{plus:!1,height:"200px",options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(t){e.isJSON(t)}}}})],1)],1)]},proxy:!0},{key:"modal-footer",fn:function(t){t.ok;var n=t.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success",disabled:e.okDisable},on:{click:e.handleOk}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(e){return n()}}})]}}])})},u=[],d=s("b8fc"),p={name:"AddStreamModal",components:{PryvBtn:l["a"]},data(){return{selectedId:null,selectedParentId:null,selectedName:null,clientData:null,nameState:null,okDisable:!1}},computed:{...Object(i["b"])(["viewAccessInfo"]),...Object(i["b"])(["connectionsMap"]),streamsMap:{get(){return this.$store.state.streamsMap},set(e){this.$store.commit("UPDATE_STREAMS_MAP",e)}},streamNames(){const e=Object.keys(this.streamsMap).filter(e=>e===this.viewAccessInfo);let t={};return t[e]=[],this.streamsMap[e].forEach(s=>{let n=[];this.pushParentName(s,n,e,t),s.parents=n;let a=[];for(let e=0;e<n.length;e++)1===e&&n.length>=2?a.push("▸"):e>1&&a.push("◾");a.length>0?s.icons=a.join(" "):s.icons=""}),this.streamsMap[e].map(e=>({value:`${e.icons} ${e.name} [${e.id}]`,text:e.parents.join("▸")}))}},methods:{pushParentName(e,t,s,n){if(e.parentId){var a=this.streamsMap[s].filter(t=>e.parentId===t.id);t.unshift(a[0].name),this.pushParentName(a[0],t,s,n)}else n[s].push(e)},isJSON:function(e){try{JSON.parse(e),this.clientData=e,this.okDisable=!1}catch(t){this.okDisable=!0}""===e&&(this.clientData=null,this.okDisable=!1)},checkFormValidity(){const e=this.$refs.form.checkValidity();return this.selectedName||(this.nameState=e),e},handleOk(e){e.preventDefault(),this.handleSubmit()},async handleSubmit(){this.checkFormValidity()&&await this.addStream()},setName(e){this.selectedName=e,this.nameState=null},async addStream(){const e=this.connectionsMap[this.viewAccessInfo];try{const t=d["a"].CREATE_STREAM_API;t[0].params={name:this.selectedName},null!==this.selectedId&&(t[0].params["id"]=this.selectedId),null!==this.selectedParentId&&(t[0].params["parentId"]=this.selectedParentId.split(" ").slice(-1)[0].replace(/[[\]]/g,"")),null!==this.clientData&&(t[0].params["clientData"]=JSON.parse(this.clientData));const s=await e.api(t);s&&s[0]&&s[0].error?(alert(s[0].error.id+" - "+s[0].error.message),this.resetModal()):await this.addStreamsToStore(s[0].stream)}catch(t){console.log("Error occurred when creating modals"+t)}},async addStreamsToStore(e){const t=Object.assign({},this.streamsMap);t[this.viewAccessInfo].push(e),this.addChild(t,e),this.streamsMap=t,this.$bvModal.hide("modal-scoped-stream"),this.resetModal()},addChild(e,t){if(null===t.parentId)return;const s=this.getParentIndex(e,t),n=this.getParent(e,s);n.children||(e[this.viewAccessInfo][s].children=[]),e[this.viewAccessInfo][s].children.push(t)},getParent(e,t){return t>=0?e[this.viewAccessInfo][t]:null},getParentIndex(e,t){return e[this.viewAccessInfo].findIndex(e=>e.id===t.parentId)},resetModal(){this.selectedName=null,this.selectedParentId=null,this.selectedId=null,this.clientData=null,this.nameState=null}}},h=p,m=s("2877"),f=Object(m["a"])(h,c,u,!1,null,null,null),b=f.exports,v={name:"Info",computed:{...Object(i["b"])(["viewAccessInfo"]),connectionsMap:{get(){return this.$store.state.connectionsMap},set(e){this.$store.commit("DELETE_CONNECTIONS_MAP",e)}},streamsMap:{get(){return this.$store.state.streamsMap},set(e){this.$store.commit("DELETE_STREAMS_MAP",e)}},accessInfoMap:{get(){return this.$store.state.accessInfoMap},set(e){this.$store.commit("DELETE_ACCESS_INFO_MAP",e)}},eventsMap:{get(){return this.$store.state.eventsMap},set(e){this.$store.commit("DELETE_EVENTS_MAP",e)}},infoJSON:{get:function(){return Object.keys(this.accessInfoMap).filter(e=>e===this.viewAccessInfo).reduce((e,t)=>(e[t]=this.accessInfoMap[t],e),{})}}},components:{AddStreamModal:b,PryvBtn:l["a"],VueJsonPretty:o.a},methods:{currentRouteName(){return this.$route.name},backToEvents(){"events"!==this.currentRouteName&&this.$router.push("events")},deleteConnectionData(){const e=Object.assign({},this.connectionsMap);delete e[this.viewAccessInfo],this.connectionsMap=e;const t=Object.assign({},this.accessInfoMap);delete t[this.viewAccessInfo],this.accessInfoMap=t;const s=Object.assign({},this.streamsMap);delete s[this.viewAccessInfo],this.streamsMap=s;const n=Object.assign({},this.eventsMap);delete n[this.viewAccessInfo],this.eventsMap=n,0===Object.keys(this.connectionsMap).length?this.$router.push("login"):this.$router.push("events")},logout(){let e=JSON.parse(this.$sessionStorage.endpoint_arr);const t=e.find(e=>e.key===this.viewAccessInfo);t.cookie&&this.$cookies.remove("pryv-libjs-web-app-explorer",window.location.pathname,"."+window.location.hostname),e=e.filter(e=>e.key!==this.viewAccessInfo),this.$sessionStorage.endpoint_arr=JSON.stringify(e),this.deleteConnectionData()}}},y=v,g=(s("6512"),Object(m["a"])(y,n,a,!1,null,"f0ed8c98",null));t["default"]=g.exports},2576:function(e,t,s){},"2a21":function(e,t,s){"use strict";var n=s("2576"),a=s.n(n);a.a},"2dd3":function(e,t,s){"use strict";var n=s("1e3b"),a=s.n(n);a.a},"3c25":function(e,t,s){"use strict";var n=s("9272"),a=s.n(n);a.a},4135:function(e,t,s){},4628:function(e,t,s){},"4daa":function(e,t,s){"use strict";var n=s("0ad8"),a=s.n(n);a.a},"56fb":function(e,t,s){},"5d30":function(e,t,s){"use strict";var n=s("de26"),a=s.n(n);a.a},6025:function(e,t,s){"use strict";var n=function(e,t){var s=t._c;return s("b-alert",{attrs:{show:t.props.show,variant:"danger"}},[t._v(t._s(t.props.message)+" ")])},a=[],i={name:"PryvAlert"},r=i,o=(s("63dc"),s("2877")),l=Object(o["a"])(r,n,a,!0,null,"7033225a",null);t["a"]=l.exports},"61be":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABmJLR0QA/wD/AP+gvaeTAAAB30lEQVRIia3Wv2sUQRjG8c/dRUQbRawVogYUjHp97LUQFMTO/AliGXKEJApaKFgKEkgsxMYfWNgIFoJFRKNRLGyvE5MyYHGixdyR2WF3cuvlhYHded95v/vOPvPuNoxuLVzFZUygh3U8xrtdyE8/8Vf8rRgr2DsqpI3NDGQwlqExAuQNDkVzH/FSqGAaRyLf+f+FpJXcEd7VwA6jG/kf7QZkviJ2MYpZbdaAHMAVYXu+9OcWMqA/0XWrImYoO5XxjWHNdkVPxoZI2MBFXBLk/Fs4JyuZNbdxLrp/sRPkGD4ol22vnzDd/rkkbq0kpmBtbFRA4nE9WtNJfBs4vhMkVdc67glS3Yrmb/TXzCbxm4rbNxRkUVE548KJv499mCmp5GxdyAz244EggPEovoVbSfwvnKkLme37bkZzW1jqV/OtBDKZg0yUQDqRfzrxlY2fOJ2DtIQXHS+aS2KagpR7FZD3OJqDwLVk0d1M7Emhgb7GWzzEBUN+BZ5GkE/yfSnXdrLWxIno/pViM4xtHt+FhrokVH6wDmzVdkULGUh6GNt1IISTPkjQFT5aA2sJTz4yBKaSRF3hEHYUW/1IkIEtK5ftrkIIPxQ52GdF0dS2VP9TQheYxB78wHM8U63GoewfAo7YbZrQf6sAAAAASUVORK5CYII="},"63dc":function(e,t,s){"use strict";var n=s("9fc2"),a=s.n(n);a.a},6512:function(e,t,s){"use strict";var n=s("deb0"),a=s.n(n);a.a},7057:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style info-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[e._v("Stream Info Panel - "+e._s(e.viewStreamInfo.id))])]),s("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[e.viewStreamInfoObj?s("PryvBtn",{staticClass:"mt-0",attrs:{icon:"arrow-left",content:"Back"},on:{click:e.backToEvents}}):e._e()],1)],1)],1),s("div",[e.computedStreamInfo?s("b-card",{staticClass:"text-info"},[s("b-row",{staticClass:"float-right mr-2"},[e.computedStreamInfo.trashed&&!0===e.computedStreamInfo.trashed&&!1===e.editable?s("b-icon",{attrs:{icon:"trash-fill","font-scale":"3"}}):e._e()],1),!1===e.editable?s("vue-json-pretty",{attrs:{path:"res",data:e.computedStreamInfo}}):s("v-jsoneditor",{attrs:{plus:!1,height:"500px",options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(t){e.isJSON(t)}}},model:{value:e.computedStreamInfo,callback:function(t){e.computedStreamInfo=t},expression:"computedStreamInfo"}}),!0===e.editable?s("b-row",{staticClass:"justify-content-center"},[s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Cancel"},on:{click:e.cancelEdit}}),s("span",{staticClass:"w-3"}),s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Save",disabled:e.saveDisable},on:{click:e.save}})],1):s("b-row",{staticClass:"justify-content-center"},[s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Edit",icon:"check2-square"},on:{click:e.edit}}),s("span",{staticClass:"w-3"}),s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Delete",icon:"trash-fill"},on:{click:function(t){e.viewStreamInfoObj.trashed&&!0===e.viewStreamInfoObj.trashed?e.$bvModal.show(e.viewStreamInfoObj.id):e.deleteStream()}}})],1)],1):s("b-card",{staticClass:"text-info"},[e._v(" Please select an endpoint to view the access data ")])],1),s("b-modal",{ref:"modal",attrs:{id:this.viewStreamInfoObj.id},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h5",[e._v("Delete a stream")])]},proxy:!0},{key:"default",fn:function(){return[s("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1",value:"accepted","unchecked-value":"not_accepted"},model:{value:e.merge,callback:function(t){e.merge=t},expression:"merge"}},[e._v(" Merge events with parents ")])]},proxy:!0},{key:"modal-footer",fn:function(t){t.ok;var n=t.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Delete",icon:"trash-fill",type:"submit",variant:"success"},on:{click:e.deleteStream}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:n}})]}}])}),s("LoadStreamsForConnection",{ref:"reloadStreams",staticClass:"invisible"})],1)])},a=[],i=s("2f62"),r=s("d538"),o=s.n(r),l=s("b707"),c=s("bcb2"),u=s.n(c),d=s("b8fc"),p=s("aa51"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:" streams",id:"submitBtn"},on:{click:e.loadStreams}})},m=[],f={name:"LoadStreamsForConnection",components:{PryvBtn:l["a"]},computed:{...Object(i["b"])(["viewStreamInfo"]),...Object(i["b"])(["connectionsMap"]),streamsMap:{get(){return this.$store.state.streamsMap},set(e){this.$store.commit("UPDATE_STREAMS_MAP",e)}}},methods:{loadStreams(){const e=this.viewStreamInfo.endpoint,t=this.connectionsMap[e];t&&this.addStreamsToStore(t)&&"Login"===this.currentRouteName()&&this.$router.push("events")},currentRouteName(){return this.$route.name},async addStreamsToStore(e){const t=d["a"].GET_STREAMS_API;t[0].params={state:"all"};try{const s=await e.api(t);if(s){const t=[];s[0].streams.forEach(s=>{this.addStream(e.apiEndpoint,s,t)});const n=Object.assign({},this.streamsMap);n[e.apiEndpoint]=t,this.streamsMap=n}}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addStream(e,t,s){t.children&&0===t.children.length&&s.push(t),t.children&&t.children.length>0&&(s.push(t),t.children.forEach(t=>this.addStream(e,t,s)))}}},b=f,v=s("2877"),y=Object(v["a"])(b,h,m,!1,null,null,null),g=y.exports,S={name:"Stream",components:{LoadStreamsForConnection:g,PryvBtn:l["a"],VueJsonPretty:o.a,VJsoneditor:u.a},data(){return{editable:!1,updatedStreamInfo:null,merge:"not_accepted",saveDisable:!0}},computed:{...Object(i["b"])(["viewStreamInfo"]),...Object(i["b"])(["viewStreamInfoObj"]),...Object(i["b"])(["connectionsMap"]),viewStreamInfoObj:{get(){return this.reset(),this.$store.state.viewStreamInfoObj},set(e){this.$store.commit("UPDATE_STREAM_INFO_OBJ",e)}},streamsMap:{get(){return this.$store.state.streamsMap},set(e){this.$store.commit("UPDATE_STREAMS_MAP",e)}},computedStreamInfo:{get(){return null!==this.updatedStreamInfo?this.updatedStreamInfo:this.$store.state.viewStreamInfoObj},set(e){this.updatedStreamInfo=e}}},methods:{isJSON:function(e){try{JSON.parse(e),this.saveDisable=!1}catch(t){this.saveDisable=!0}},currentRouteName(){return this.$route.name},backToEvents(){"events"!==this.currentRouteName&&this.$router.push("events")},edit(){this.editable=!this.editable},getUpdatedProps(){const e={};return Object.keys(this.viewStreamInfoObj).forEach(t=>{t in this.computedStreamInfo&&this.viewStreamInfoObj[t]!==this.computedStreamInfo[t]&&("object"===typeof this.viewStreamInfoObj[t]&&"children"!==t?JSON.stringify(this.viewStreamInfoObj[t])!==JSON.stringify(this.computedStreamInfo[t])&&(e[t]=this.computedStreamInfo[t]):"children"!==t&&(e[t]=this.computedStreamInfo[t]))}),e},async save(){const e=this.getUpdatedProps();if(0===Object.keys(e).length)return void alert("No changes for the existing stream is detected. Note : Child streams are not editable");const t=this.viewStreamInfo.endpoint,s=this.connectionsMap[t];try{const n=d["a"].UPDATE_STREAM_API;n[0].params={id:this.viewStreamInfoObj.id,update:e};const a=await s.api(n);await this.addStreamsToStore(t,a[0].stream,p["a"].EDIT),a&&a[0]&&a[0].error&&alert(a[0].error.id+" - "+a[0].error.message)}catch(n){console.log("Error occurred when creating events"+n)}},async addStreamsToStore(e,t,s){t.children=this.viewStreamInfoObj.children;const n=Object.assign({},this.streamsMap),a=n[this.viewStreamInfo.endpoint].findIndex(e=>e.id===this.viewStreamInfo.id);if(p["a"].EDIT===s){const s=n[e][a];s.parentId!==t.parentId?(this.addChild(n,t),this.removeChild(n,s)):this.updateChild(n,t)}else p["a"].DELETE===s&&this.updateChild(n,t);n[e][a]=t,this.viewStreamInfoObj=t,this.streamsMap=n,this.saveDisable=!0,this.editable=!1},getParent(e,t){return t>=0?e[this.viewStreamInfo.endpoint][t]:null},removeChild(e,t){if(null===t.parentId)return;const s=this.getParentIndex(e,t),n=this.getParent(e,s);if(null!==n){let a=Object.assign({},n);a.children=n.children.filter(e=>e.id!==t.id),e[this.viewStreamInfo.endpoint][s]=a}},addChild(e,t){if(null===t.parentId)return;const s=this.getParentIndex(e,t),n=this.getParent(e,s);if(n.children){let a=Object.assign({},n);a.children.push(t),e[this.viewStreamInfo.endpoint][s]=a}},updateChild(e,t){if(null===t.parentId)return;const s=this.getParentIndex(e,t),n=this.getParent(e,s);n.children&&n.children.filter(e=>e.id===t.id).map((n,a)=>e[this.viewStreamInfo.endpoint][s].children[a]=t)},getParentIndex(e,t){const s=e[this.viewStreamInfo.endpoint].findIndex(e=>e.id===t.parentId);return s},reset(){Object.assign(this.$data,this.$options.data.call(this))},async deleteStream(){const e=this.viewStreamInfo.endpoint,t=this.connectionsMap[e];try{const s=d["a"].DELETE_STREAM_API;s[0].params={id:this.viewStreamInfoObj.id,mergeEventsWithParent:"accepted"===this.merge};const n=await t.api(s);if(n&&n[0]&&n[0].stream){const t=n[0].stream;await this.addStreamsToStore(e,t,p["a"].DELETE),t.children=this.viewStreamInfoObj.children,this.viewStreamInfoObj=t}n&&n[0]&&n[0].streamDeletion&&(this.$refs.reloadStreams.$el.click(),this.$bvModal.hide(n[0].streamDeletion.id),this.backToEvents()),n&&n[0]&&n[0].error&&alert(n[0].error.id+" - "+n[0].error.message)}catch(s){console.log("Error occurred when creating modals"+s)}},cancelEdit(){this.editable=!this.editable,this.updatedStreamInfo=null}}},C=S,k=(s("2a21"),Object(v["a"])(C,n,a,!1,null,null,null));t["default"]=k.exports},9272:function(e,t,s){},"9fc2":function(e,t,s){},a55b:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style login-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[e._v("Login Panel")])]),s("b-col",{staticClass:"text-right",attrs:{cols:"2"}},[e.showBtn?s("PryvBtn",{staticClass:"mt-0",attrs:{content:"Back",icon:"arrow-left"},on:{click:e.backToEvents}}):e._e()],1)],1)],1),s("div",[s("b-card",{attrs:{"no-body":""}},[s("b-tabs",{attrs:{"content-class":"mt-3",fill:""}},[s("b-tab",{attrs:{title:"Token Based Login",active:""}},[s("b-card-text",[s("b-card",{staticClass:"card-style shadow min-height-card"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#within-a-webpage-with-a-login-button",parentData:"Login using Web Button"}}),s("WebButton",{key:e.serviceInfoMap.web,on:{authenticated:e.updateSessionStorage}}),s("br"),s("div",{staticClass:"text-left"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"pryv-btn-collapse",attrs:{variant:"secondary"}},[e._v("View Service Info ")]),s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[s("b-card",{staticClass:"card-style border-0"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#usage-of-pryvservice",parentData:"Service Info URL"}}),s("ServiceInfo",{attrs:{id:"web_login"}})],1)],1)],1)],1)],1)],1),s("b-tab",{attrs:{title:"Username, Password Login"}},[s("b-card-text",[s("b-card",{staticClass:"card-style shadow"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#using-servicelogin-trusted-apps-only",parentData:"Login using Username, Password"}}),s("UsernameLogin",{on:{authenticated:e.updateSessionStorage}}),s("br"),s("div",{staticStyle:{"text-align":"left"}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-2",expression:"'collapse-2'"}],staticClass:"pryv-btn-collapse",attrs:{variant:"secondary"}},[e._v("View Service Info ")]),s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-2"}},[s("b-card",{staticClass:"card-style shadow border-0"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#usage-of-pryvservice",parentData:"Service Info URL"}}),s("ServiceInfo",{attrs:{id:"manual_login"}})],1)],1)],1)],1)],1)],1),s("b-tab",{attrs:{title:"API Endpoint Login"}},[s("b-card-text",[s("b-card",{staticClass:"card-style shadow"},[s("PryvLabel",{attrs:{href:"https://github.com/pryv/lib-js#using-an-api-endpoint",parentData:"Login Using API"}}),s("APILogin",{on:{authenticated:e.updateSessionStorage}})],1)],1)],1)],1),s("b-overlay",{attrs:{show:e.showOverlay,"no-wrap":""}})],1)],1)])])},a=[],i=s("b707"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("PryvAlert",{attrs:{message:e.alertMessage,show:e.show}})],1),s("div",[s("b-form",{staticClass:"text-right",on:{submit:function(e){e.preventDefault()}}},[s("div",{staticClass:"mb-4 mb-sm-0 text-right"},[s("PryvInput",{attrs:{id:"inline-form-input-endpoint",placeholder:"Enter API Endpoint",required:""},on:{textInput:e.updateEndpoint},model:{value:e.apiEndpoint,callback:function(t){e.apiEndpoint=t},expression:"apiEndpoint"}})],1),s("PryvBtn",{attrs:{content:"Login",type:"submit"},on:{click:e.loginAPI}})],1)],1)])},o=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-input",{staticClass:"pryv-input",attrs:{id:e.id,placeholder:e.placeholder,value:e.value,type:e.type,disabled:e.disabled,required:e.required},on:{input:function(t){return e.$emit("textInput",t)}}})},c=[],u={name:"PryvInput",props:{value:{type:String,default:""},placeholder:{type:String},id:{type:String},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},type:{type:String,default:"text"}}},d=u,p=(s("2dd3"),s("2877")),h=Object(p["a"])(d,l,c,!1,null,"f4e119aa",null),m=h.exports,f=s("6025"),b={name:"APILogin",components:{PryvInput:m,PryvBtn:i["a"],PryvAlert:f["a"]},data(){return{apiEndpoint:"",placeHolder:"",show:!1,alertMessage:""}},methods:{loginAPI:async function(){try{const e=new this.$pryv.Connection(this.apiEndpoint);e?this.$emit("authenticated",e,!1):console.log("Please enter a valid endpoint.")}catch(e){this.show=!0,this.alertMessage=e.message,this.apiEndpoint=""}},updateEndpoint(e){this.apiEndpoint=e,this.apiEndpoint&&this.show&&(this.show=!1,this.alertMessage="")}}},v=b,y=Object(p["a"])(v,r,o,!1,null,null,null),g=y.exports,S=function(e,t){var n=t._c;return n("b-row",[n("b-col",{staticClass:"p-0",attrs:{cols:"1"}},[t.props.href?n("a",{attrs:{target:"_blank",href:t.props.href}},[n("b-img",{attrs:{src:s("61be"),width:"10px"}})],1):t._e()]),n("b-col",{staticClass:"text-left p-0",attrs:{cols:"11"}},[n("h5",{staticClass:"pryv-label pl-3 mb-2",domProps:{textContent:t._s(t.props.parentData)}})])],1)},C=[],k={name:"PryvLabel"},T=k,E=(s("4daa"),Object(p["a"])(T,S,C,!0,null,"de48ac82",null)),_=E.exports,w=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},O=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-left"},[s("span",{attrs:{id:"pryv-button"}}),s("br")])}],x=s("d4bf"),j=s.n(x),I=s("2f62"),M={name:"WebButton",computed:{...Object(I["b"])(["serviceInfoMap"])},async mounted(){await this.loadButton()},methods:{async loadButton(){await j.a.Browser.setupAuth(A.call(this),this.serviceInfoMap["web"])}}};async function D(e){let t=null;e.id===j.a.Browser.AuthStates.AUTHORIZED&&(t=new j.a.Connection(e.apiEndpoint),t?this.$emit("authenticated",t,!0):console.log("Error with Web Login")),e.id===j.a.Browser.AuthStates.INITIALIZED&&(t=null)}function A(){return{spanButtonID:"pryv-button",onStateChange:D.bind(this),authRequest:{requestingAppId:"web-app-explorer",requestedPermissions:[{streamId:"*",level:"manage"}],clientData:{"app-web-auth:description":{type:"note/txt",content:"This is a consent message."}}}}}var P=M,N=Object(p["a"])(P,w,O,!1,null,null,null),F=N.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("PryvAlert",{attrs:{show:e.show,message:e.message}})],1),s("div",[s("b-form",{ref:"form",attrs:{inline:""},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("label",{staticClass:"sr-only",attrs:{for:"inline-form-input-username"}},[e._v("Username")]),s("b-input-group",{staticClass:"input-group-width mb-4 mr-sm-2 mb-sm-0"},[s("PryvInput",{attrs:{id:"inline-form-input-username",placeholder:"Enter username",required:""},on:{textInput:e.updateUsername},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("label",{staticClass:"sr-only",attrs:{for:"inline-form-input-password"}},[e._v("Password")]),s("b-input-group",{staticClass:"input-group-width mb-4 mb-sm-0 w-40 float-right"},[s("PryvPassword",{attrs:{id:"inline-form-input-password",placeholder:"Enter password"},on:{passwordInput:e.updatePassword},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("PryvBtn",{attrs:{content:"Login",type:"submit",id:"submitBtn"},on:{click:e.login}})],1)],1)])},L=[],B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form-input",{staticClass:"pryv-input",attrs:{id:e.id,placeholder:e.placeholder,value:e.value,type:"password",disabled:e.disabled,required:"",autocomplete:"on"},on:{input:function(t){return e.$emit("passwordInput",t)}}})},R=[],q={name:"PryvPassword",props:{value:{type:String,default:""},placeholder:{type:String},id:{type:String},disabled:{type:Boolean,default:!1}}},U=q,V=(s("3c25"),Object(p["a"])(U,B,R,!1,null,"266dedbb",null)),Y=V.exports,J={name:"UsernameLogin",components:{PryvAlert:f["a"],PryvPassword:Y,PryvBtn:i["a"],PryvInput:m},data(){return{username:"",password:"",show:!1,message:""}},computed:{...Object(I["b"])(["serviceInfoMap"])},methods:{async login(){const e=this.serviceInfoMap["manual"],t="web-app-explorer",s=new this.$pryv.Service(e);try{const e=await s.login(this.username,this.password,t);e?this.$emit("authenticated",e,!1):(this.show=!0,this.message="login credentials are not correct.",this.username="",this.password="",console.log("Invalid login credentials."))}catch(n){this.show=!0,this.message=n.message,this.username="",this.password="",console.log(n.message)}},updateUsername(e){this.username=e,this.username&&this.show&&(this.show=!1,this.message="")},updatePassword(e){this.password=e,this.password&&this.show&&(this.show=!1,this.message="")}}},K=J,G=(s("ecdf"),Object(p["a"])(K,$,L,!1,null,"03e3536b",null)),z=G.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-form",[s("b-input-group",{staticClass:"mb-4 mr-sm-4 mb-sm-0"},[s("b-input",{ref:"serviceInfo",attrs:{id:e.id,placeholder:"Enter Service Endpoint",value:e.serviceInfoUrl},on:{input:e.setServiceInfo}})],1),s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:"Fetch Service Info"},on:{click:e.fetchServiceInfo}})],1),s("div",{staticClass:"pt-2"},[s("h6",{staticClass:"text-left default-font"},[e._v(e._s(e.ServiceInfoLabel))]),s("div",{staticClass:"service-info-container"},[s("div",{staticClass:"text-left default-font"},[e._v(' "register": '+e._s(e.register)+" "),s("br"),e._v(' "access": '+e._s(e.access)+" "),s("br"),e._v(' "api": '+e._s(e.api)+" "),s("br"),e._v(' "name": '+e._s(e.name)+" "),s("br"),e._v(' "home": '+e._s(e.home)+" "),s("br"),e._v(' "support": '+e._s(e.support)+" "),s("br"),e._v(' "terms": '+e._s(e.terms)+" "),s("br"),e._v(' "eventTypes": '+e._s(e.eventTypes)),s("br"),e._v(' "assets": '+e._s(e.assets)),s("br")])])])],1)},H=[],Q=s("aa51"),Z={name:"APILogin",components:{PryvBtn:i["a"]},computed:{serviceInfoMap:{get(){return this.$store.state.serviceInfoMap},set(e){this.$store.commit("UPDATE_SERVICE_INFO_MAP",e)}}},data(){return{serviceInfoUrl:"manual_login"===this.id?this.$store.state.serviceInfoMap["manual"]:this.$store.state.serviceInfoMap["web"],ServiceInfoLabel:"Service Info",register:"",access:"",api:"",name:"",home:"",support:"",terms:"",eventTypes:"",assets:""}},props:{id:{type:String}},async created(){console.log("created service info"),console.log(this.id),console.log(this.serviceInfoMap);let e=null,t=null;this.$route.query&&this.$route.query.pryvServiceInfoUrl&&(this.serviceInfoUrl=this.$route.query.pryvServiceInfoUrl);try{e=new this.$pryv.Service(this.serviceInfoUrl),t=await e.info()}catch(s){this.serviceInfoUrl=Q["a"].DEFAULT_SERVICE_INFO_URL,this.$route.query.pryvServiceInfoUrl=this.serviceInfoUrl,e=new this.$pryv.Service(this.serviceInfoUrl),t=await e.info()}finally{"manual_login"===this.id?this.serviceInfoMap.manual=this.serviceInfoUrl:"web_login"===this.id&&(this.serviceInfoMap.web=this.serviceInfoUrl),this.register=t.register,this.access=t.access,this.api=t.api,this.name=t.name,this.home=t.home,this.support=t.support,this.terms=t.terms,this.eventTypes=t.eventTypes,this.assets=t.assets}},methods:{setServiceInfo(e){this.serviceInfoUrl=e},async fetchServiceInfo(){let e=null,t=null;try{e=new this.$pryv.Service(this.serviceInfoUrl),t=await e.info()}catch(s){this.serviceInfoUrl=Q["a"].DEFAULT_SERVICE_INFO_URL,e=new this.$pryv.Service(this.serviceInfoUrl),t=await e.info()}finally{"manual_login"===this.id?this.serviceInfoMap.manual=this.serviceInfoUrl:"web_login"===this.id&&(this.serviceInfoMap.web=this.serviceInfoUrl),console.log("fianall service info"),console.log(this.serviceInfo),this.register=t.register,this.access=t.access,this.api=t.api,this.name=t.name,this.home=t.home,this.support=t.support,this.terms=t.terms,this.eventTypes=t.eventTypes,this.assets=t.assets}}}},X=Z,ee=(s("fbeb"),Object(p["a"])(X,W,H,!1,null,"228f9ea0",null)),te=ee.exports,se=s("b8fc"),ne={components:{ServiceInfo:te,UsernameLogin:z,WebButton:F,PryvLabel:_,APILogin:g,PryvBtn:i["a"]},computed:{...Object(I["b"])(["serviceInfoMap"]),connectionsMap:{get(){return this.$store.state.connectionsMap},set([e,t]){this.connectionsMap[e]||this.$store.commit("ADD_CONNECTIONS_MAP",[e,t])}},streamsMap:{get(){return this.$store.state.streamsMap},set([e,t]){let s=[];s=this.streamsMap[e]?this.streamsMap[e]:[],s.push(t),this.$store.commit("ADD_STREAMS_MAP",[e,s])}},accessInfoMap:{get(){return this.$store.state.accessInfoMap},set([e,t]){this.accessInfoMap[e]||this.$store.commit("ADD_ACCESS_INFO_MAP",[e,t])}},eventsMap:{get(){return this.$store.state.eventsMap},set([e,t]){this.$store.commit("ADD_EVENTS_MAP",[e,t])}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set([e,t]){this.$store.commit("ADD_DISPLAY_EVENTS_MAP",[e,t])}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([e,t]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[e,t])}},types:{get(){return this.$store.state.types},set(e){this.$store.commit("SET_TYPES",e)}},showBtn:function(){return!!this.connectionsMap&&Object.keys(this.connectionsMap).length>0}},data(){return{events:[],displayEvents:[],typesSet:new Set,showOverlay:!1}},methods:{addAPIEndpointsToSessionStorage(e,t){let s=this.$sessionStorage.endpoint_arr;return s=s?JSON.parse(s):[],!(s.filter(t=>t.key===e.apiEndpoint).length>0)&&(s.push({key:e.apiEndpoint,cookie:t}),this.$sessionStorage.endpoint_arr=JSON.stringify(s),!0)},addConnectionToStore(e){return this.connectionsMap=[e.apiEndpoint,e],!0},async addStreamsToStore(e){const t=se["a"].GET_STREAMS_API;t[0].params={state:"all"};try{const s=await e.api(t);s&&s[0].streams.forEach(t=>{this.addStream(e.apiEndpoint,t)})}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addInitialEventsToStore(e){this.displayEvents=[];const t=se["a"].GET_EVENTS_API;t[0].params={};try{const s=await e.api(t);this.modifiedSinceMap=[e.apiEndpoint,Date.now()/1e3],s&&(s[0].events.forEach(e=>{this.forEachDisplayEvent(e)}),this.eventsDisplayMap=[e.apiEndpoint,this.displayEvents])}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addStream(e,t){t.children&&0===t.children.length&&(this.streamsMap=[e,t]),t.children&&t.children.length>0&&(this.streamsMap=[e,t],t.children.forEach(t=>this.addStream(e,t)))},async addAccessInfoToStore(e){try{const t=await e.api(se["a"].ACCESS_INFO_API);t&&(this.accessInfoMap=[e.apiEndpoint,t[0]])}catch(t){return console.log("Error occurred when retrieving access info "+t),!1}return!0},async addEventsToStore(e){this.events=[];let t={limit:1e6};try{const s=await e.getEventsStreamed(t,this.forEachEvent);this.modifiedSinceMap=[e.apiEndpoint,s.meta.serverTime],this.eventsMap=[e.apiEndpoint,this.events]}catch(s){return console.log("Error occurred when retrieving events "+s),!1}return!0},forEachEvent(e){this.events.push(e)},forEachDisplayEvent(e){this.displayEvents.push(e),this.typesSet.add(e.type),this.types=this.typesSet},async updateStore(e){this.showOverlay=!0;const t=await this.addConnectionToStore(e),s=await this.addStreamsToStore(e),n=await this.addAccessInfoToStore(e),a=await this.addInitialEventsToStore(e);return!!(t&&s&&n&&a)&&(this.showOverlay=!1,!0)},async updateSessionStorage(e,t){const s=await this.addAPIEndpointsToSessionStorage(e,t);!0===s&&await this.updateStore(e).then(async function(t){t&&this.$router.push("events"),this.addEventsToStore(e)}.bind(this)).catch((function(e){alert(e)}))},currentRouteName(){return this.$route.name},backToEvents(){"events"!==this.currentRouteName&&this.$router.push("events")}}},ae=ne,ie=(s("d6db"),Object(p["a"])(ae,n,a,!1,null,null,null));t["default"]=ie.exports},aa9c:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow h-100 w-100 d-flex justify-content-center"},[s("div",{staticClass:"bg-white py-2 w-90"},[s("div",{staticClass:"card-style events-card"},[s("b-row",[s("b-col",{attrs:{cols:"10"}},[s("h4",[e._v("Events Panel")])]),s("b-col",{staticClass:"px-0 float-right",attrs:{cols:"2"}},[s("LoadAllBtn",{staticClass:"mr-2"}),s("LoadEventsBtn")],1)],1)],1),s("FilterPanel"),s("br"),s("div",[s("b-card",{attrs:{"no-body":""}},[s("b-col",{staticClass:"pr-0",attrs:{cols:"2",offset:"10"}},[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{id:"submitBtn",icon:"plus",content:"Event"},on:{click:function(t){return e.$bvModal.show("modal-scoped-event")}}})],1),s("AddEventModal"),s("b-tabs",{staticClass:"table-font",attrs:{card:""}},[s("b-tab",{attrs:{title:"TABLE VIEW",active:""}},[s("b-card-text",[s("div",[s("b-table",{attrs:{fields:e.fields,"sticky-header":"",responsive:"",striped:"",hover:"",items:e.fetchData},scopedSlots:e._u([{key:"cell(attachments)",fn:function(t){return[t.item.attachments&&t.item.attachments.length>0?s("div",[s("a",{attrs:{target:"_blank",href:"https://"+t.item.endpoint+"events/"+t.item.id+"/"+t.item.attachments[0].id+"?readToken="+t.item.attachments[0].readToken}},[e._v(e._s(t.item.attachments[0].id))]),s("div",[e._v("Click to view the attachment")])]):s("p",[e._v("No Attachments")])]}},{key:"cell(edit)",fn:function(t){return[s("PryvBtn",{staticClass:"mt-0 mr-5",attrs:{icon:"check2-square"},on:{click:function(s){return e.$bvModal.show(t.item.id)}}}),s("EditEventModal",{attrs:{data:t.item,apiEndpoint:t.item.apiEndpoint,id:t.item.id}})]}},{key:"cell(content)",fn:function(t){return[t.item.content&&t.item.type.includes("series")?s("div",[e._v(" "+e._s(t.item.content.fields)+" "),s("a",{attrs:{href:"#"},on:{click:function(s){return e.openJSON(t.item.endpoint,t.item.id,t.item.token)}}},[e._v(" Click here to view data")])]):s("div",[e._v(e._s(t.item.content))])]}}])}),0===e.fetchData.length?s("PryvAlert",{attrs:{show:e.show,message:e.message}}):e._e()],1)])],1),this.limit<500?s("b-tab",{attrs:{title:"JSON VIEW"}},[s("b-card-text",{staticClass:"text-left"},[s("vue-json-pretty",{attrs:{data:this.displayJSON}}),0===e.fetchData.length?s("PryvAlert",{attrs:{show:e.show,message:e.message}}):e._e()],1)],1):e._e()],1),s("b-overlay",{attrs:{show:e.showOverlay,"no-wrap":""}})],1)],1)],1)])},a=[],i=s("2f62"),r=s("d538"),o=s.n(r),l=s("6025"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-row",[e.tags.length>0?s("b-form-tags",{staticClass:"mb-2 text-left",attrs:{"no-outer-focus":""},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}},[s("ul",{staticClass:"list-unstyled d-inline-flex flex-wrap mb-0",attrs:{id:"my-custom-tags-list","aria-live":"polite","aria-atomic":"false","aria-relevant":"additions removals"}},e._l(e.tags,(function(t){return s("b-card",{key:t,staticClass:"mt-1 mr-1",attrs:{tag:"li","body-class":"py-1 pr-2 text-nowrap"}},[s("strong",{staticClass:"default-font"},[e._v(e._s(t))])])})),1)]):e._e()],1),s("b-col",{staticClass:"px-0",attrs:{cols:"12"}},[s("b-col",{staticClass:"px-0",attrs:{cols:"1"}},[s("b-overlay",{staticClass:"d-inline-block",attrs:{show:e.busy,opacity:"0.6","spinner-small":"","spinner-variant":"primary"},on:{hidden:e.onHidden}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],ref:"button",staticClass:"pryv-btn-style float-left",attrs:{variant:"danger"}},[e._v("Filters"),s("b-icon",{staticClass:"pl-1 pr-1 pt-2",attrs:{icon:"filter","font-scale":"2"}})],1)],1)],1)],1),s("b-col",{staticClass:"px-0",attrs:{cols:"12"}},[s("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[s("br"),s("b-card",{staticClass:"p-3"},[s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.fromLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.fromLabelToSort,t)}},model:{value:e.valueFromCheck,callback:function(t){e.valueFromCheck=t},expression:"valueFromCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("DatePicker",{attrs:{disabled:!1===this.valueFromCheck,value:e.valueFrom},on:{updateFilter:function(t){return e.selectFiltersRelatedToDates(e.fromLabelToSort,t)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.toLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.toLabelToSort,t)}},model:{value:e.valueToCheck,callback:function(t){e.valueToCheck=t},expression:"valueToCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("DatePicker",{attrs:{disabled:!1===this.valueToCheck,value:e.valueTo},on:{updateFilter:function(t){return e.selectFiltersRelatedToDates(e.toLabelToSort,t)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.modifiedSinceLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.modifiedSinceLabelToSort,t)}},model:{value:e.valueModifiedCheck,callback:function(t){e.valueModifiedCheck=t},expression:"valueModifiedCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("DatePicker",{attrs:{disabled:!1===this.valueModifiedCheck,value:e.valueModified},on:{updateFilter:function(t){return e.selectFiltersRelatedToDates(e.modifiedSinceLabelToSort,t)}}})],1)],1)],1)],1),s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.stateLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.stateLabelToSort,t)}},model:{value:e.valueStateCheck,callback:function(t){e.valueStateCheck=t},expression:"valueStateCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("Dropbox",{attrs:{disabled:!1===this.valueStateCheck,options:e.optionsState,valueSelected:e.valueState},on:{input:function(t){return e.selectFilterStateOrSort(e.stateLabelToSort,t)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.sortLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.sortLabelToSort,t)}},model:{value:e.valueSortCheck,callback:function(t){e.valueSortCheck=t},expression:"valueSortCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("Dropbox",{attrs:{disabled:!1===this.valueSortCheck,options:e.optionsSort,valueSelected:e.valueSort},on:{input:function(t){return e.selectFilterStateOrSort(e.sortLabelToSort,t)}}})],1)],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.limitLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.limitLabelToSort,t)}},model:{value:e.valueLimitCheck,callback:function(t){e.valueLimitCheck=t},expression:"valueLimitCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("b-form-input",{staticClass:"default-font",attrs:{disabled:!1===this.valueLimitCheck,placeholder:"Enter the limit",type:"text"},on:{input:e.selectFilterLimit},nativeOn:{keydown:function(t){return e.enter_limit_event(t)}},model:{value:e.valueLimit,callback:function(t){e.valueLimit=t},expression:"valueLimit"}})],1)],1)],1)],1),s("b-row",[s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.typeLabel},on:{change:function(t){return e.clickCheckboxToDisableFilter(e.typeLabelToSort,t)}},model:{value:e.valueTypeCheck,callback:function(t){e.valueTypeCheck=t},expression:"valueTypeCheck"}})],1),s("b-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("b-button",{staticClass:"default-font modify-btn",attrs:{disabled:!1===this.valueTypeCheck,id:"submitBtn"},on:{click:function(t){return e.$bvModal.show("modal-scoped")}}},[e._v("Modify Types ")])],1),s("TypesFilterModal",{attrs:{label:e.typesMessage,options:e.optionsTypes,title:e.modalTitle,value:e.selected},on:{clickCancel:e.cancelTypeFilters,clickOk:e.setTypeFilters,listChange:e.setSelected}})],1)],1),s("b-col",{attrs:{cols:"4"}},[s("b-row",[s("b-col",{staticClass:"text-left",attrs:{cols:"4"}},[s("Checkbox",{attrs:{content:e.runningLabel},on:{change:function(t){return e.selectFilterStateOrSort(e.runningLabelToSort,t)}},model:{value:e.valueRunning,callback:function(t){e.valueRunning=t},expression:"valueRunning"}})],1)],1)],1)],1)],1)],1)],1)],1)},u=[],d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("input",{attrs:{name:"checkbox-1",type:"checkbox"},domProps:{checked:e.checked},on:{change:function(t){return e.$emit("change",t.target.checked)}}}),s("label",{staticClass:"checkbox-label"},[e._v(" "+e._s(e.content)+" ")])])},p=[],h={name:"Checkbox",model:{prop:"checked",event:"change"},props:{content:{type:String},checked:{required:!0}}},m=h,f=(s("5d30"),s("2877")),b=Object(f["a"])(m,d,p,!1,null,null,null),v=b.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-form-select",{staticClass:"mb-3 dropbox-filter",attrs:{disabled:e.disabled,options:e.options,value:e.valueSelected},on:{input:function(t){return e.$emit("input",t)}}})},g=[],S={name:"Dropbox",props:{valueSelected:{required:!0},options:{required:!0},disabled:{required:!1,default:!1}}},C=S,k=Object(f["a"])(C,y,g,!1,null,null,null),T=k.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-input-group",{staticClass:"mb-3"},[s("b-form-input",{staticClass:"default-font",attrs:{value:e.value,type:"text",placeholder:"YYYY-MM-DD",autocomplete:"off",disabled:e.disabled}}),s("b-input-group-append",[s("b-form-datepicker",{attrs:{value:e.value,"button-only":"",right:"",locale:"en-US","aria-controls":"example-input",disabled:e.disabled},on:{context:function(t){return e.$emit("updateFilter",t)}}})],1)],1)},_=[],w={name:"DatePicker",props:{value:{required:!0},disabled:{required:!0}}},O=w,x=Object(f["a"])(O,E,_,!1,null,null,null),j=x.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"modal-scoped"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h5",[e._v(e._s(e.title))])]},proxy:!0},{key:"default",fn:function(){return[s("b-form-group",{attrs:{label:e.label}},[s("b-form-checkbox-group",{staticClass:"pl-4",attrs:{options:e.options,id:"checkbox-group-1",name:"flavour-1"},model:{value:e.valueLocal,callback:function(t){e.valueLocal=t},expression:"valueLocal"}})],1)]},proxy:!0},{key:"modal-footer",fn:function(t){var n=t.ok,a=t.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success"},on:{click:function(t){return e.$emit("clickOk",n)}}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(t){return e.$emit("clickCancel",a)}}})]}}])})},M=[],D=s("b707"),A={name:"TypesFilterModal",components:{PryvBtn:D["a"]},props:{title:{required:!0,type:String},label:{required:!0},options:{required:!0},value:{required:!0}},computed:{valueLocal:{get:function(){return this.value},set:function(e){this.$emit("listChange",e)}}}},P=A,N=(s("f41c"),Object(f["a"])(P,I,M,!1,null,null,null)),F=N.exports,$=s("aa51"),L={name:"FilterPanel",components:{TypesFilterModal:F,DatePicker:j,Checkbox:v,Dropbox:T},computed:{...Object(i["b"])(["types"]),updatedFilters:{get(){return this.$store.state.selectedFilters},set(e){this.$store.commit("UPDATE_SELECTED_FILTERS",e)}},optionsTypes(){const e=[];for(let t of this.types){const s={text:t,value:t};e.push(s)}return e},typesMessage(){return this.types.size>0?"Select one or multiple types to filter":"You have selected no endpoints to view"}},data(){return{valueFrom:null,valueTo:null,valueRunning:!1,valueState:null,valueSort:null,valueModified:null,valueLimit:"",optionsState:[{value:null,text:"Select the state"},{value:$["d"].DEFAULT,text:"DEFAULT"},{value:$["d"].TRASHED,text:"TRASHED"},{value:$["d"].ALL,text:"ALL"}],optionsSort:[{value:null,text:"Select the sorting order"},{value:!0,text:"TRUE"},{value:!1,text:"FALSE"}],modalShow:!1,selected:[],fromLabel:$["b"].FROM,toLabel:$["b"].TO,stateLabel:$["b"].STATE,sortLabel:$["b"].SORT,modifiedSinceLabel:$["b"].MODIFIED_SINCE,limitLabel:$["b"].LIMIT,typeLabel:$["b"].TYPES,runningLabel:$["b"].RUNNING,fromLabelToSort:$["c"].FROM,toLabelToSort:$["c"].TO,stateLabelToSort:$["c"].STATE,sortLabelToSort:$["c"].SORT,modifiedSinceLabelToSort:$["c"].MODIFIED_SINCE,limitLabelToSort:$["c"].LIMIT,typeLabelToSort:$["c"].TYPES,runningLabelToSort:$["c"].RUNNING,valueFromCheck:!1,valueToCheck:!1,valueStateCheck:!1,valueSortCheck:!1,valueModifiedCheck:!1,valueLimitCheck:!1,valueTypeCheck:!1,modalTitle:"Select Types to Filter",tags:[],busy:!1}},methods:{onHidden(){this.$refs.button.focus()},enter_limit_event(e){13===e.which&&(this.busy=!0,setTimeout(async function(){""!==this.valueLimit?(this.tags=this.tags.filter(e=>!e.includes($["b"].LIMIT)),this.tags.push($["b"].LIMIT+" - "+this.valueLimit),this.updateSelectedFiltersArray($["c"].LIMIT,parseInt(this.valueLimit))):this.removeFromSelectedFiltersArray($["c"].LIMIT,this.tags=this.tags.filter(e=>!e.includes($["b"].LIMIT))),this.busy=!1}.bind(this),150))},setSelected(e){this.busy=!0,this.selected=e,this.selected?(this.tags=this.tags.filter(e=>!e.includes($["b"].TYPES)),this.tags.push($["b"].TYPES+" - "+e)):this.tags=this.tags.filter(e=>!e.includes($["b"].TYPES)),this.busy=!1},selectFiltersRelatedToDates(e,t){switch(this.busy=!0,t.selectedYMD?this.updateSelectedFiltersArray(e,Date.parse(t.selectedYMD)/1e3):this.removeFromSelectedFiltersArray(e),e){case $["c"].FROM:this.valueFrom=t.selectedYMD,this.valueFrom?(this.tags=this.tags.filter(e=>!e.includes($["b"].FROM)),this.tags.push($["b"].FROM+" - "+t.selectedYMD)):this.tags=this.tags.filter(e=>!e.includes($["b"].FROM));break;case $["c"].TO:this.valueTo=t.selectedYMD,this.valueTo?(this.tags=this.tags.filter(e=>!e.includes($["b"].TO)),this.tags.push($["b"].TO+" - "+t.selectedYMD)):this.tags=this.tags.filter(e=>!e.includes($["b"].TO));break;case $["c"].MODIFIED_SINCE:this.valueModified=t.selectedYMD,this.valueModified?(this.tags=this.tags.filter(e=>!e.includes($["b"].MODIFIED_SINCE)),this.tags.push($["b"].MODIFIED_SINCE+" - "+t.selectedYMD)):this.tags=this.tags.filter(e=>!e.includes($["b"].MODIFIED_SINCE));break}this.busy=!1},selectFilterStateOrSort(e,t){switch(this.busy=!0,t?this.updateSelectedFiltersArray(e,t):this.removeFromSelectedFiltersArray(e),e){case $["c"].SORT:this.valueSort=t,this.valueSort?(this.tags=this.tags.filter(e=>!e.includes($["b"].SORT)),this.tags.push($["b"].SORT+" - "+t)):this.tags=this.tags.filter(e=>!e.includes($["b"].SORT));break;case $["c"].STATE:this.valueState=t,this.valueState?(this.tags=this.tags.filter(e=>!e.includes($["b"].STATE)),this.tags.push($["b"].STATE+" - "+t)):this.tags=this.tags.filter(e=>!e.includes($["b"].STATE));break;case $["c"].RUNNING:this.valueRunning=t,this.valueRunning?(this.tags=this.tags.filter(e=>!e.includes($["b"].RUNNING)),this.tags.push($["b"].RUNNING+" - "+t)):this.tags=this.tags.filter(e=>!e.includes($["b"].RUNNING));break}this.busy=!1},selectFilterLimit(e){isNaN(e)?this.valueLimit="":this.valueLimit=e},updateSelectedFiltersArray(e,t){const s=Object.assign({},this.updatedFilters);s[e]=t,this.updatedFilters=s},removeFromSelectedFiltersArray(e){const t=Object.assign({},this.updatedFilters);t[e]&&(delete t[e],this.updatedFilters=t)},clickCheckboxToDisableFilter(e,t){if(!t)switch(e){case $["c"].FROM:this.valueFrom="";break;case $["c"].TO:this.valueTo="";break;case $["c"].STATE:this.valueState=null;break;case $["c"].SORT:this.valueSort=null;break;case $["c"].MODIFIED_SINCE:this.valueModified="";break;case $["c"].LIMIT:this.valueLimit="",this.removeFromSelectedFiltersArray(e),this.tags=this.tags.filter(e=>!e.includes($["b"].LIMIT));break;case $["c"].TYPES:this.selected=[],this.removeFromSelectedFiltersArray(e),this.tags=this.tags.filter(e=>!e.includes($["b"].TYPES));break}},cancelTypeFilters(e){e()},setTypeFilters(e){this.busy=!0,this.selected.length>0?this.updateSelectedFiltersArray($["c"].TYPES,this.selected):this.removeFromSelectedFiltersArray($["c"].TYPES),e(),this.busy=!1}}},B=L,R=(s("fe17"),Object(f["a"])(B,c,u,!1,null,"4fa3b39f",null)),q=R.exports,U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:" Events",id:"submitBtn"},on:{click:e.loadEvents}})},V=[],Y={name:"LoadEventsBtn",components:{PryvBtn:D["a"]},data(){return{events:[],typesSet:new Set}},computed:{...Object(i["b"])(["connectionsMap"]),...Object(i["b"])(["selectedFilters"]),eventsMap:{get(){return this.$store.state.eventsMap},set(e){this.$store.commit("UPDATE_EVENTS_MAP",e)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(e){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",e)}},types:{get(){return this.$store.state.types},set(e){this.$store.commit("SET_TYPES",e)}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([e,t]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[e,t])}}},methods:{loadEvents(){let e=this.$sessionStorage.endpoint_arr;e=e?JSON.parse(e):[],e.forEach(e=>{const t=this.connectionsMap[e.key];t&&this.addEventsToStore(t)}),"Events"!==this.currentRouteName()&&this.$router.push("events")},currentRouteName(){return this.$route.name},async addEventsToStore(e){this.events=[];let t=this.modifiedSinceMap[e.apiEndpoint],s={modifiedSince:1e3*t};try{const t=await e.getEventsStreamed(s,this.addEachEvent);this.modifiedSinceMap=[e.apiEndpoint,t.meta.serverTime/1e3],this.typesSet=new Set;const n=Object.assign({},this.eventsDisplayMap);this.events.forEach(t=>{0===this.eventsMap[e.apiEndpoint].filter(e=>e.id===t.id).length&&this.eventsMap[e.apiEndpoint].push(t),0===n[e.apiEndpoint].filter(e=>e.id===t.id).length&&n[e.apiEndpoint].push(t)}),this.eventsDisplayMap=n}catch(n){console.log("Error occurred when retrieving events"+n)}},addEachEvent(e){this.events.push(e),this.typesSet.add(e.type),this.types=this.typesSet}}},J=Y,K=Object(f["a"])(J,U,V,!1,null,null,null),G=K.exports,z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("PryvBtn",{attrs:{icon:"arrow-clockwise",content:" All",id:"submitBtn"},on:{click:e.loadStreams}})},W=[],H=s("b8fc"),Q={name:"LoadAllBtn",components:{PryvBtn:D["a"]},data(){return{events:[],typesSet:new Set}},computed:{...Object(i["b"])(["connectionsMap"]),streamsMap:{get(){return this.$store.state.streamsMap},set(e){this.$store.commit("UPDATE_STREAMS_MAP",e)}},eventsMap:{get(){return this.$store.state.eventsMap},set(e){this.$store.commit("UPDATE_EVENTS_MAP",e)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(e){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",e)}},types:{get(){return this.$store.state.types},set(e){this.$store.commit("SET_TYPES",e)}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([e,t]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[e,t])}}},methods:{loadStreams(){let e=this.$sessionStorage.endpoint_arr;e=e?JSON.parse(e):[],e.forEach(e=>{const t=this.connectionsMap[e.key];t&&this.updateStore(t)})},currentRouteName(){return this.$route.name},async addStreamsToStore(e){const t=H["a"].GET_STREAMS_API;t[0].params={state:"all"};try{const s=await e.api(t);if(s){const t=[];s[0].streams.forEach(s=>{this.addStream(e.apiEndpoint,s,t)});const n=Object.assign({},this.streamsMap);n[e.apiEndpoint]=t,this.streamsMap=n}}catch(s){return console.log("Error occurred when retrieving streams "+s),!1}return!0},async addStream(e,t,s){t.children&&0===t.children.length&&s.push(t),t.children&&t.children.length>0&&(s.push(t),t.children.forEach(t=>this.addStream(e,t,s)))},async addEventsToStore(e){this.events=[];let t=this.modifiedSinceMap[e.apiEndpoint],s={modifiedSince:t};try{const t=await e.getEventsStreamed(s,this.forEachEvent);this.modifiedSinceMap=[e.apiEndpoint,t.meta.serverTime],this.typesSet=new Set;const n=Object.assign({},this.eventsDisplayMap);this.events.forEach(t=>{0===this.eventsMap[e.apiEndpoint].filter(e=>e.id===t.id).length&&this.eventsMap[e.apiEndpoint].push(t),0===n[e.apiEndpoint].filter(e=>e.id===t.id).length&&n[e.apiEndpoint].push(t)}),this.eventsDisplayMap=n}catch(n){return console.log("Error occurred when retrieving events"+n),!1}return!0},forEachEvent(e){this.events.push(e),this.typesSet.add(e.type),this.types=this.typesSet},updateStore(e){this.addStreamsToStore(e)&&this.addEventsToStore(e)&&"Login"===this.currentRouteName()&&this.$router.push("events")}}},Z=Q,X=Object(f["a"])(Z,z,W,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:e.data.id},on:{hidden:e.resetModal,ok:e.handleOk},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h5",[e._v("Edit event - "+e._s(e.data.id))])]},proxy:!0},{key:"default",fn:function(){return[s("form",{ref:e.data.id,on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[s("b-form-group",{attrs:{label:"Connection *","label-for":"input-connection"}},[s("b-form-input",{attrs:{value:e.selectedConnectionComputed,disabled:"",id:"input-connection"}})],1),s("b-form-group",{attrs:{label:"Stream *","label-for":"input-stream","invalid-feedback":"Stream is required",state:e.streamState}},[s("b-form-input",{attrs:{value:e.selectedStreamComputed,placeholder:"Select a stream",list:"input-stream-list",id:"input-stream",required:"",state:e.streamState,autocomplete:"off"},on:{input:e.setStream}}),s("b-form-datalist",{attrs:{id:"input-stream-list",options:e.streamNames}})],1),s("b-form-group",{attrs:{label:"Type *","label-for":"input-type","invalid-feedback":"Type is required",state:e.typeState}},[s("b-form-input",{attrs:{value:e.selectedTypeComputed,list:"input-type-list",id:"input-type",required:"",state:e.typeState,placeholder:"Select a type",autocomplete:"off"},on:{input:e.setTypeObject}}),s("b-form-datalist",{attrs:{id:"input-type-list",options:e.typeNames}})],1),e._l(e.contentNames,(function(t,n){return s("div",{key:"attr-"+n,staticClass:"mt-2"},[s("b-form-group",{attrs:{label:t.label,"label-for":t.labelFor,"invalid-feedback":t.feedback,state:e.contentStates[n]}},["enum"===t.type?s("Dropbox",{staticStyle:{"font-size":"1rem"},attrs:{options:t.enum,valueSelected:t.val,id:t.labelFor,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}}):"attachment"===t.type?s("b-form-file",{attrs:{value:t.val,size:"sm",id:t.labelFor,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}}):s("b-form-input",{attrs:{type:"string"===t.type?"text":t.type,value:t.val,id:t.labelFor,placeholder:t.type,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}})],1)],1)})),s("b-form-group",{attrs:{label:"Time","label-for":"input-time-pick"}},[s("date-picker",{attrs:{id:"input-time","aria-placeholder":"Enter Time",config:e.options},model:{value:e.selectedTimeComputed,callback:function(t){e.selectedTimeComputed=t},expression:"selectedTimeComputed"}})],1),s("b-form-group",{attrs:{label:"Duration","label-for":"input-duration"}},[s("b-form-input",{attrs:{type:"text",id:"input-duration",placeholder:"Enter Duration"},model:{value:e.selectedDurationComputed,callback:function(t){e.selectedDurationComputed=t},expression:"selectedDurationComputed"}})],1),s("b-form-group",{attrs:{label:"Description","label-for":"input-description"}},[s("b-form-input",{attrs:{type:"text",id:"input-description",placeholder:"Enter Description"},model:{value:e.selectedDescriptionComputed,callback:function(t){e.selectedDescriptionComputed=t},expression:"selectedDescriptionComputed"}})],1),s("b-form-group",{attrs:{label:"Client Data","label-for":"input-client-data"}},[s("v-jsoneditor",{ref:"json",attrs:{height:"200px",plus:!1,options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(t){e.isJSON(t)}}},model:{value:e.selectedClientDataComputed,callback:function(t){e.selectedClientDataComputed=t},expression:"selectedClientDataComputed"}})],1)],2)]},proxy:!0},{key:"modal-footer",fn:function(t){t.ok;var n=t.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success"},on:{click:e.handleOk}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(t){return e.cancelEdit(n)}}})]}}])})},se=[],ne={name:"EditEventModal",components:{Dropbox:T,PryvBtn:D["a"]},props:{data:{type:Object,required:!0,default:null}},data(){return{options:{format:"MM/DD/YYYY h:mm:ss",useCurrent:!1,showClear:!0,showClose:!0},connectionLbl:"Select the Connection",selectedConnection:null,selectedEndpoint:null,selectedStream:null,selectedType:null,selectedTypeObject:null,type:"note/txt",streamState:null,typeState:null,contentStatesCheck:[],contentObjs:null,selectedTime:null,selectedDuration:null,selectedDescription:null,clientData:null,okDisable:!1}},computed:{...Object(i["b"])(["connectionsMap"]),...Object(i["b"])(["accessInfoMap"]),...Object(i["b"])(["streamsMap"]),...Object(i["b"])(["typesAll"]),selectedConnectionComputed:{get(){return this.selectedConnection?this.selectedConnection:this.accessInfoMap[this.data.apiEndpoint].name},set(e){this.selectedConnection=e}},selectedEndpointComputed:{get(){return this.selectedEndpoint?this.selectedEndpoint:this.data.apiEndpoint},set(e){this.selectedEndpoint=e}},selectedStreamComputed:{get(){if(this.selectedStream)return this.selectedStream;{const e=this.streamsMap[this.data.apiEndpoint].filter(e=>e.id===this.data.streamId);return`${e[0].name} [${this.data.streamId}]`}},set(e){this.selectedStream=e}},selectedTypeComputed:{get(){return this.selectedType?this.selectedType:this.data.type},set(e){this.selectedType=e}},selectedTypeObjectComputed:{get(){return this.selectedTypeObject?this.selectedTypeObject:this.typesAll[this.selectedTypeComputed]},set(e){this.selectedTypeObject=e}},selectedTimeComputed:{get(){return this.selectedTime?this.selectedTime:new Date(1e3*this.data.time)},set(e){this.selectedTime=e}},selectedDurationComputed:{get(){return this.selectedDuration?this.selectedDuration:this.data.duration},set(e){this.selectedDuration=e}},selectedDescriptionComputed:{get(){return this.selectedDescription?this.selectedDescription:this.data.description},set(e){this.selectedDescription=e}},selectedClientDataComputed:{get(){return this.clientData?this.clientData:this.data.clientData},set(e){this.clientData=e}},connectionNames(){return Object.keys(this.accessInfoMap).map(e=>({value:this.accessInfoMap[e].name,text:e}))},streamNames(){if(null!==this.selectedConnectionComputed&&null!==this.selectedEndpointComputed){const e=Object.keys(this.streamsMap).filter(e=>e===this.selectedEndpointComputed);return this.streamsMap[e].map(t=>({value:`${t.name} [${t.id}]`,text:e}))}return null},typeNames(){return Object.keys(this.typesAll).map(e=>({value:e,text:this.typesAll[e].type}))},contentStates(){if(0===this.contentStatesCheck.length){const e=[];for(let t=0;t<this.contentNames.length;t++)e.push(null);return e}return this.contentStatesCheck},contentNames(){const e=[];if(null!==this.selectedTypeObjectComputed&&this.selectedTypeObjectComputed){if(this.data.type!==this.selectedTypeComputed)if("string"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.enum){const t={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:"enum",val:null,enum:this.selectedTypeObjectComputed.enum,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else if("null"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.attachmentRequired){const t={label:"Attachment "+(this.selectedTypeObjectComputed.required?"*":""),type:"attachment",val:null,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Attachment",feedback:"Attachment is required"};e.push(t)}else if("string"===this.selectedTypeObjectComputed.type){const t={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:this.selectedTypeObjectComputed.type,val:null,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else if("number"===this.selectedTypeObjectComputed.type){const t={label:"Content *",type:this.selectedTypeObjectComputed.type,val:null,required:!0,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else"object"!==this.selectedTypeObjectComputed.type&&"array"!==this.selectedTypeObjectComputed.type||Object.keys(this.selectedTypeObjectComputed.properties).forEach(t=>{const s={label:`${t}${this.getRequired(t)?"*":""}`,type:this.selectedTypeObjectComputed.properties[t].type,val:null,required:this.getRequired(t),labelFor:"input-content-"+t,feedback:t+" is required",labelKey:t};e.push(s)});else if("string"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.enum){const t={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:"enum",val:this.data.content,enum:this.selectedTypeObjectComputed.enum,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else if("null"===this.selectedTypeObjectComputed.type&&this.selectedTypeObjectComputed.attachmentRequired){const t={label:"Attachment "+(this.selectedTypeObjectComputed.required?"*":""),type:"attachment",val:null,required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Attachment",feedback:"Attachment is required"};e.push(t)}else if("string"===this.selectedTypeObjectComputed.type){const t={label:"Content "+(this.selectedTypeObjectComputed.required?"*":""),type:this.selectedTypeObjectComputed.type,val:this.data.content.toString(),required:!!this.selectedTypeObjectComputed.required,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else if("number"===this.selectedTypeObjectComputed.type){const t={label:"Content *",type:this.selectedTypeObjectComputed.type,val:this.data.content.toString(),required:!0,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else"object"!==this.selectedTypeObjectComputed.type&&"array"!==this.selectedTypeObjectComputed.type||Object.keys(this.selectedTypeObjectComputed.properties).forEach(t=>{const s={label:`${t}${this.getRequired(t)?"*":""}`,type:this.selectedTypeObjectComputed.properties[t].type,val:"string"===this.selectedTypeObjectComputed.properties[t].type?this.data.content[t].toString():"number"===this.selectedTypeObjectComputed.properties[t].type?+this.data.content[t]:null,required:this.getRequired(t),labelFor:"input-content-"+t,feedback:t+" is required",labelKey:t};e.push(s)});return e}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(e){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",e)}},eventsMap:{get(){return this.$store.state.eventsMap},set(e){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",e)}}},methods:{isJSON:function(e){try{JSON.parse(e),this.okDisable=!1}catch(t){this.okDisable=!0}""===e&&(this.okDisable=!1)},getRequired(e){return!!(this.selectedTypeObjectComputed.required&&this.selectedTypeObjectComputed.required.length>0&&this.selectedTypeObjectComputed.required.includes(e))},checkFormValidity(){const e=this.$refs[this.data.id].checkValidity();return""===this.selectedStream&&(this.streamState=e),""===this.selectedType&&(this.typeState=e),this.contentNames&&this.contentNames.forEach(t=>{let s;!0!==t.required||""!==t.val&&null!==t.val?(s=this.contentNames.indexOf(t),this.$set(this.contentStatesCheck,s,null)):(s=this.contentNames.indexOf(t),this.$set(this.contentStatesCheck,s,e))}),e},handleOk(e){e.preventDefault(),this.handleSubmit()},async handleSubmit(){this.checkFormValidity()&&await this.editEvent()},async editEvent(){const e={};if(this.data.streamId!==this.selectedStreamComputed.split(" ").slice(-1)[0].replace(/[[\]]/g,"")&&(e["streamId"]=this.selectedStreamComputed.split(" ").slice(-1)[0].replace(/[[\]]/g,"")),this.data.type!==this.selectedTypeComputed){e["type"]=this.selectedTypeComputed;let t=null;"string"===this.selectedTypeObjectComputed.type?t=this.contentNames[0].val:"number"===this.selectedTypeObjectComputed.type?t=+this.contentNames[0].val:"object"===this.selectedTypeObjectComputed.type||"array"===this.selectedTypeObjectComputed.type?(t={},this.contentNames.forEach(e=>{if("number"===e.type){let s=+e.val;isNaN(s)||(t[e.labelKey]=s)}else e.val&&(t[e.labelKey]=e.val)})):("attachment"===this.selectedTypeObjectComputed.type||"null"===this.selectedTypeObjectComputed.type)&&(t=null),"object"===typeof t&&null!==t?Object.keys(t).length>0&&(e["content"]=t):null!==t&&(e["content"]=t)}else{let t=null;if("string"===this.selectedTypeObjectComputed.type)this.data.content!==this.contentNames[0].val&&(t=this.contentNames[0].val);else if("number"===this.selectedTypeObjectComputed.type)this.data.content!==+this.contentNames[0].val&&(t=+this.contentNames[0].val);else if("object"===this.selectedTypeObjectComputed.type||"array"===this.selectedTypeObjectComputed.type){t={};let e=!1;this.contentNames.every(function(t){let s="number"===t.type?+t.val:t.val;return this.data.content[t.labelKey]===s||(e=!0,!1)}.bind(this)),!0===e&&this.contentNames.forEach(e=>{if("number"===e.type){let s=+e.val;isNaN(s)||(t[e.labelKey]=s)}else e.val&&(t[e.labelKey]=e.val)})}else("attachment"===this.selectedTypeObjectComputed.type||"null"===this.selectedTypeObjectComputed.type)&&(t=null);"object"===typeof t&&null!==t?Object.keys(t).length>0&&(e["content"]=t):null!==t&&(e["content"]=t),new Date(1e3*this.data.time)!==this.selectedTimeComputed&&null!==this.selectedTime&&""!==this.selectedTime&&(e["time"]=new Date(this.selectedTimeComputed).getTime()/1e3),this.data.duration!==this.selectedDurationComputed&&null!==this.selectedDuration&&""!==this.selectedDuration&&(e["duration"]=+this.selectedDurationComputed),this.data.description!==this.selectedDescriptionComputed&&(e["description"]=this.selectedDescriptionComputed),this.data.clientData!==this.selectedClientDataComputed&&(e["clientData"]=this.selectedClientDataComputed)}if(0===Object.keys(e).length)return void alert("No changes to the event. Please cancel if you dont want to change the event");const t=this.connectionsMap[this.selectedEndpointComputed];try{const s=H["a"].UPDATE_EVENT_API;s[0].params={id:this.data.id,update:e};const n=await t.api(s);if(n&&n[0]&&n[0].error)return alert(n[0].error.id+" - "+n[0].error.message),void this.resetModal();await this.addEventsToStore(n[0].event)}catch(s){console.log("Error occurred when creating modals"+s)}},async addEventsToStore(e){const t=Object.assign({},this.eventsDisplayMap),s=t[this.data.apiEndpoint].findIndex(t=>t.id===e.id);t[this.data.apiEndpoint][s]=e;const n=this.eventsMap[this.data.apiEndpoint].findIndex(t=>t.id===e.id);this.eventsMap[this.data.apiEndpoint][n]=e,this.eventsDisplayMap=t,this.$bvModal.hide(this.data.id)},resetModal(){this.selectedEndpoint=this.data.apiEndpoint,this.selectedConnection=this.accessInfoMap[this.data.apiEndpoint].name;const e=this.streamsMap[this.data.apiEndpoint].filter(e=>e.id===this.data.streamId);this.selectedStream=`${e[0].name} [${this.data.streamId}]`,this.selectedType=this.data.type,this.selectedTypeObject=this.typesAll[this.selectedType],this.data.type===this.selectedType&&this.contentNames&&("object"===this.data.type||"array"===this.data.type?this.contentNames.forEach(e=>{let t=e.labelKey;e.val=this.data.content[t]}):"string"===this.data.type||this.data.enum?this.contentNames[0]=this.data.content.toString():"number"===this.data.type&&(this.contentNames[0]=this.data.content)),this.selectedTime=new Date(1e3*this.data.time),this.selectedDuration=this.data.duration,this.selectedDescription=this.data.description,this.clientData=this.data.clientData,this.streamState=null,this.typeState=null,this.contentStatesCheck=[]},setEndpoint(e){this.selectedConnectionComputed=e,this.selectedEndpointComputed=e?this.connectionNames.find(e=>e.value===this.selectedConnectionComputed).text:e},setTypeObject(e){this.selectedTypeComputed=e,this.typeState=null,this.selectedTypeObjectComputed=e?this.typesAll[this.selectedTypeComputed]:null},updateValue(e,t){e.val=t,this.$set(this.contentStatesCheck,this.contentNames.indexOf(e),null)},cancelEdit(e){this.resetModal(),e()},setStream(e){this.streamState=null,this.selectedStreamComputed=e}}},ae=ne,ie=Object(f["a"])(ae,te,se,!1,null,"b9202764",null),re=ie.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"modal",attrs:{id:"modal-scoped-event"},on:{hidden:e.resetModal,ok:e.handleOk,show:e.resetModal},scopedSlots:e._u([{key:"modal-header",fn:function(){return[s("h5",[e._v("Add a new event")])]},proxy:!0},{key:"default",fn:function(){return[s("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[s("b-form-group",{attrs:{label:"Connection *","label-for":"input-connection","invalid-feedback":"Connection is required",state:e.connectionState}},[s("b-form-input",{attrs:{value:e.selectedConnection,placeholder:"Select a endpoint",list:"input-connection-list",id:"input-connection",state:e.connectionState,required:"",autocomplete:"off"},on:{input:e.setEndpoint}}),s("b-form-datalist",{attrs:{id:"input-connection-list",options:e.connectionNames}})],1),s("b-form-group",{attrs:{label:"Stream *","label-for":"input-stream","invalid-feedback":"Stream is required",state:e.streamState}},[s("b-form-input",{attrs:{value:e.selectedStream,placeholder:"Select a stream",list:"input-stream-list",id:"input-stream",required:"",state:e.streamState,autocomplete:"off"},on:{input:e.setStream}}),s("b-form-datalist",{attrs:{id:"input-stream-list",options:e.streamNames}})],1),s("b-form-group",{attrs:{label:"Type *","label-for":"input-type","invalid-feedback":"Type is required",state:e.typeState}},[s("b-form-input",{attrs:{value:e.selectedType,list:"input-type-list",id:"input-type",required:"",state:e.typeState,placeholder:"Select a type",autocomplete:"off"},on:{input:e.setTypeObject}}),s("b-form-datalist",{attrs:{id:"input-type-list",options:e.typeNames}})],1),e._l(e.contentNames,(function(t,n){return s("div",{key:"attr-"+n,staticClass:"mt-2"},[s("b-form-group",{attrs:{label:t.label,"label-for":t.labelFor,"invalid-feedback":t.feedback,state:e.contentStates[n]}},["enum"===t.type?s("Dropbox",{attrs:{options:t.enum,valueSelected:t.val,id:t.labelFor,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}}):"attachment"===t.type?s("b-form-file",{attrs:{value:t.val,size:"sm",id:t.labelFor,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}}):"number"===t.type?s("b-form-input",{attrs:{type:"number",value:t.val,id:t.labelFor,placeholder:t.type,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}}):"string"===t.type?s("b-form-input",{attrs:{type:"text",value:t.val,id:t.labelFor,placeholder:t.type,required:t.required,state:e.contentStates[n]},on:{input:function(s){return e.updateValue(t,s)}}}):e._e()],1)],1)})),s("b-form-group",{attrs:{label:"Time","label-for":"input-time-pick"}},[s("date-picker",{attrs:{"aria-placeholder":"Enter Time",config:e.options},model:{value:e.selectedTimeStamp,callback:function(t){e.selectedTimeStamp=t},expression:"selectedTimeStamp"}})],1),s("b-form-group",{attrs:{label:"Duration","label-for":"input-duration"}},[s("b-form-input",{attrs:{type:"text",id:"input-duration",placeholder:"Enter Duration"},model:{value:e.selectedDuration,callback:function(t){e.selectedDuration=t},expression:"selectedDuration"}})],1),s("b-form-group",{attrs:{label:"Description","label-for":"input-description"}},[s("b-form-input",{attrs:{type:"text",id:"input-description",placeholder:"Enter Description"},model:{value:e.selectedDescription,callback:function(t){e.selectedDescription=t},expression:"selectedDescription"}})],1),s("b-form-group",{attrs:{label:"Client Data","label-for":"input-client-data"}},[s("v-jsoneditor",{attrs:{plus:!1,height:"200px",options:{enableTransform:!1,enableSort:!1,statusBar:!1,mainMenuBar:!0,search:!1,navigationBar:!1,mode:"code",onChangeText:function(t){e.isJSON(t)}}}})],1)],2)]},proxy:!0},{key:"modal-footer",fn:function(t){t.ok;var n=t.cancel;return[s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"OK",icon:"check",type:"submit",variant:"success",disabled:e.okDisable},on:{click:e.handleOk}}),s("PryvBtn",{staticClass:"mt-0 float-right",attrs:{content:"Cancel",icon:"x"},on:{click:function(e){return n()}}})]}}])})},le=[],ce={name:"AddEventModal",components:{PryvBtn:D["a"],Dropbox:T},data(){return{selectedConnection:null,selectedStream:null,selectedEndpoint:null,selectedType:null,selectedTypeObject:null,connectionLbl:"Select the Connection",type:"note/txt",content:null,connectionState:null,streamState:null,typeState:null,contentStatesCheck:[],selectedTime:null,selectedTimeStamp:new Date,options:{format:"MM/DD/YYYY h:mm:ss",useCurrent:!1,showClear:!0,showClose:!0},selectedDuration:null,selectedDescription:null,clientData:null,okDisable:!1}},computed:{...Object(i["b"])(["connectionsMap"]),...Object(i["b"])(["accessInfoMap"]),...Object(i["b"])(["streamsMap"]),...Object(i["b"])(["typesAll"]),...Object(i["b"])(["eventsMap"]),connectionNames(){return Object.keys(this.accessInfoMap).map(e=>({value:this.accessInfoMap[e].name,text:e}))},streamNames(){if(null===this.selectedConnection&&null===this.selectedEndpoint||""===this.selectedConnection&&""===this.selectedEndpoint)return;const e=Object.keys(this.streamsMap).filter(e=>e===this.selectedEndpoint);return this.streamsMap[e].filter(e=>!e.trashed).map(t=>({value:`${t.name} [${t.id}]`,text:e}))},typeNames(){return Object.keys(this.typesAll).map(e=>({value:e,text:this.typesAll[e].type}))},contentStates(){if(0===this.contentStatesCheck.length){const e=[];for(let t=0;t<this.contentNames.length;t++)e.push(null);return e}return this.contentStatesCheck},contentNames(){const e=[];if(null!==this.selectedTypeObject&&this.selectedTypeObject){if("string"===this.selectedTypeObject.type&&this.selectedTypeObject.enum){const t={label:"Content "+(this.selectedTypeObject.required?"*":""),type:"enum",val:null,enum:this.selectedTypeObject.enum,required:!!this.selectedTypeObject.required,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else if("null"===this.selectedTypeObject.type&&this.selectedTypeObject.attachmentRequired){const t={label:"Attachment "+(this.selectedTypeObject.required?"*":""),type:"attachment",val:null,required:!!this.selectedTypeObject.required,State:null,labelFor:"input-content-Attachment",feedback:"Attachment is required"};e.push(t)}else if("string"===this.selectedTypeObject.type||"number"===this.selectedTypeObject.type){const t={label:"Content "+("number"===this.selectedTypeObject.type?"*":""),type:this.selectedTypeObject.type,val:null,required:"number"===this.selectedTypeObject.type,labelFor:"input-content-Content",feedback:"Content is required"};e.push(t)}else"object"!==this.selectedTypeObject.type&&"array"!==this.selectedTypeObject.type||Object.keys(this.selectedTypeObject.properties).forEach(t=>{if("required"===t)return;const s={label:`${t}${this.getRequired(t)?"*":""}`,type:this.selectedTypeObject.properties[t].type,val:null,required:this.getRequired(t),labelFor:"input-content-"+t,feedback:t+" is required",labelKey:t};e.push(s)});return e}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set(e){this.$store.commit("UPDATE_DISPLAY_EVENTS_MAP",e)}},modifiedSinceMap:{get(){return this.$store.state.modifiedSinceMap},set([e,t]){this.$store.commit("ADD_MODIFIED_SINCE_MAP",[e,t])}}},methods:{isJSON:function(e){try{JSON.parse(e),this.clientData=e,this.okDisable=!1}catch(t){this.okDisable=!0}""===e&&(this.clientData=null,this.okDisable=!1)},getRequired(e){return!!(this.selectedTypeObject.required&&this.selectedTypeObject.required.length>0&&this.selectedTypeObject.required.includes(e))},checkFormValidity(){const e=this.$refs.form.checkValidity();return null!==this.selectedEndpoint&&""!==this.selectedEndpoint||(this.connectionState=e),null!==this.selectedStream&&""!==this.selectedStream||(this.streamState=e),null!==this.selectedType&&""!==this.selectedType||(this.typeState=e),this.contentNames&&this.contentNames.forEach((t,s)=>{!0!==t.required||null!==t.val&&""!==t.val?this.$set(this.contentStatesCheck,s,null):this.$set(this.contentStatesCheck,s,e)}),e},handleOk(e){e.preventDefault(),this.handleSubmit()},async handleSubmit(){this.checkFormValidity()&&await this.addEvent()},async addEvent(){if(null===this.selectedEndpoint)return;if(null===this.selectedStream)return;if(null===this.selectedTypeObject)return;const e=this.connectionsMap[this.selectedEndpoint];try{const t=H["a"].CREATE_EVENT_API;let s=null;if("string"===this.selectedTypeObject.type?s=this.contentNames[0].val:"number"===this.selectedTypeObject.type?s=+this.contentNames[0].val:"object"!==this.selectedTypeObject.type&&"array"!==this.selectedTypeObject.type||(s={},this.contentNames.forEach(e=>{if("number"===e.type){let t=+e.val;isNaN(t)||(s[e.labelKey]=t)}else e.val&&(s[e.labelKey]=e.val)})),"null"===this.selectedTypeObject.type&&this.contentNames.length>0&&"attachment"===this.contentNames[0].type){let t=new FormData;t.append("file0",this.contentNames[0].val),e.createEventWithFormData({type:this.selectedType.toLowerCase(),streamId:this.selectedStream.split(" ").slice(-1)[0].replace(/[[\]]/g,"")},t).then(function(e,t){if(t)return alert(t),void this.resetModal();e.event&&this.addEventsToStore(e.event)}.bind(this))}else{t[0].params={streamId:this.selectedStream.split(" ").slice(-1)[0].replace(/[[\]]/g,""),type:this.selectedType.toLowerCase(),content:s},null!==this.selectedTimeStamp&&""!==this.selectedTimeStamp&&(t[0].params["time"]=new Date(this.selectedTimeStamp).getTime()/1e3),null!==this.selectedDuration&&""!==this.selectedDuration&&(t[0].params["duration"]=+this.selectedDuration),null!==this.selectedDescription&&(t[0].params["description"]=this.selectedDescription),null!==this.clientData&&(t[0].params["clientData"]=JSON.parse(this.clientData));const n=await e.api(t);n&&n[0]&&n[0].error?(alert(n[0].error.id+" - "+n[0].error.message),this.resetModal()):await this.addEventsToStore(n[0].event)}}catch(t){console.log("Error occurred when creating modals"+t)}},async addEventsToStore(e){let t=JSON.parse(JSON.stringify(this.eventsDisplayMap));t[this.selectedEndpoint].unshift(e),this.eventsMap[this.selectedEndpoint].unshift(e),this.eventsDisplayMap=t,this.$bvModal.hide("modal-scoped-event")},resetModal(){this.selectedEndpoint=null,this.selectedConnection=null,this.selectedStream=null,this.selectedType=null,this.selectedTypeObject=null,this.selectedTimeStamp=new Date,this.selectedDuration=null,this.selectedDescription=null,this.clientData=null,this.connectionState=null,this.streamState=null,this.typeState=null,this.contentStatesCheck=[]},setEndpoint(e){this.connectionState=null,this.selectedConnection=e,this.selectedEndpoint=e?this.connectionNames.find(e=>e.value===this.selectedConnection).text:e},setStream(e){this.streamState=null,this.selectedStream=e},setTypeObject(e){this.typeState=null,this.selectedType=e,this.selectedTypeObject=e?this.typesAll[this.selectedType]:null},updateValue(e,t){e.val=t,this.$set(this.contentStatesCheck,this.contentNames.indexOf(e),null)}}},ue=ce,de=Object(f["a"])(ue,oe,le,!1,null,"fdd05ee0",null),pe=de.exports,he={name:"Events",components:{AddEventModal:pe,EditEventModal:re,PryvBtn:D["a"],LoadAllBtn:ee,LoadEventsBtn:G,FilterPanel:q,PryvAlert:l["a"],VueJsonPretty:o.a},data(){return{fetchData:[],show:!0,message:"No info available to display.",typesSet:new Set,showOverlay:!1,limit:20,fields:[{key:"edit",label:"Edit"},{key:"id",label:"Id",sortable:!0},{key:"streamId",label:"Stream Id",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"time",label:"Time",formatter:e=>new Date(1e3*e).toUTCString(),sortable:!0},{key:"content",label:"Content"},{key:"streamIds",label:"Stream Ids"},{key:"tags",label:"Tags"},{key:"attachments",label:"Attachments Id"},{key:"description",label:"Description"},{key:"clientData",label:"Client Data"},{key:"created",label:"Created",sortable:!0,formatter:e=>new Date(1e3*e).toUTCString()},{key:"createdBy",label:"Created By"},{key:"modified",label:"Modified",sortable:!0,formatter:e=>new Date(1e3*e).toUTCString()},{key:"modifiedBy",label:"Modified By"}]}},computed:{...Object(i["b"])(["selectedStreams"]),...Object(i["b"])(["selectedFilters"]),...Object(i["b"])(["eventsMap"]),displayJSON(){return this.fetchData.length>0?this.fetchData:" "},types:{get(){return this.$store.state.types},set(e){this.$store.commit("SET_TYPES",e)}},typesAll:{get(){return this.$store.state.typesAll},set(e){this.$store.commit("SET_TYPES_ALL",e)}},eventsDisplayMap:{get(){return this.$store.state.eventsDisplayMap},set([e,t]){this.$store.commit("ADD_DISPLAY_EVENTS_MAP",[e,t])}}},mounted(){this.axios.get($["a"].DEFAULT_SERVICE_INFO_URL).then(e=>{this.axios.get(e.data.eventTypes).then(e=>{let t=e.data.types;Object.keys(t).forEach((function(e){const s=t[e];delete t[e],t[e.toLowerCase()]=s})),this.typesAll=t})})},async created(){await this.displayEvents()},watch:{selectedStreams(){this.selectStreamsOrFilters()},selectedFilters(){this.selectStreamsOrFilters()},eventsDisplayMap(){this.selectStreamsOrFilters()}},methods:{selectStreamsOrFilters(){this.showOverlay=!0,setTimeout(async function(){await this.displayEvents(),await this.filterEvents(),this.showOverlay=!1}.bind(this),100)},async displayEvents(){this.fetchData=[],this.typesSet=new Set;const e=20;if(!this.selectedStreams||!this.eventsDisplayMap||this.eventsDisplayMap&&0===Object.keys(this.eventsDisplayMap).length)return;if(this.selectedFilters&&Object.keys(this.selectedFilters).includes($["c"].LIMIT)){const e=parseInt(this.selectedFilters[$["c"].LIMIT]);this.limit=e;for(const[t,s]of Object.entries(this.eventsMap))this.eventsDisplayMap[t]=s.slice(0,e)}else{this.limit=e;for(const[t,s]of Object.entries(this.eventsDisplayMap))s.length>20&&(this.eventsDisplayMap[t]=s.slice(0,e))}let t=[];for(const[s,n]of Object.entries(this.selectedStreams)){let e={};for(let t=0;t<this.eventsDisplayMap[s].length;t++){let n=this.eventsDisplayMap[s][t].streamId;Object.keys(e).includes(n)||(e[n]=[]);let a=this.eventsDisplayMap[s][t];a.apiEndpoint=s,a.endpoint=s.split("@")[1],a.endpoint=s.split("@")[1],a.token=s.split("@")[0].replace(/(^\w+:|^)\/\//,""),e[n].push(a)}for(let s=0;s<n.length;s++)Object.keys(e).includes(n[s])&&e[n[s]].forEach(e=>{t.push(e),this.typesSet.add(e.type)})}t.length>0&&(this.fetchData.push(...t),this.types=this.typesSet)},async filterEvents(){let e=this.fetchData;this.selectedFilters&&(1===Object.keys(this.selectedFilters).length&&Object.keys(this.selectedFilters).includes($["c"].LIMIT)||(Object.keys(this.selectedFilters).sort().forEach(t=>{switch(t){case $["c"].FROM:{const s=e.filter(function(e){return e.time>this.selectedFilters[t]}.bind(this));e=[...s];break}case $["c"].TO:{const s=e.filter(function(e){return e.time<this.selectedFilters[t]}.bind(this));e=[...s];break}case $["c"].TYPES:{const s=e.filter(function(e){return this.selectedFilters[t].includes(e.type)}.bind(this));e=[...s];break}case $["c"].RUNNING:{const t=e.filter(function(e){return null===e.duration}.bind(this));e=[...t];break}case $["c"].STATE:{const s=e.filter(function(e){return $["d"].TRASHED in e&&$["d"].TRASHED===this.selectedFilters[t]||!($["d"].DEFAULT in e)&&$["d"].DEFAULT===this.selectedFilters[t]||$["d"].ALL===this.selectedFilters[t]}.bind(this));e=[...s];break}case $["c"].MODIFIED_SINCE:{const s=e.filter(function(e){return e.time>this.selectedFilters[t]}.bind(this));e=[...s];break}case $["c"].SORT:!0===this.selectedFilters[t]?e.sort((e,t)=>e.time>t.time?1:t.time>e.time?-1:0):e.sort((e,t)=>e.time<t.time?1:t.time<e.time?-1:0);break}}),this.fetchData=[...e]))},openJSON(e,t,s){this.axios.get(`https://${e}events/${t}/series?auth=${s}`).then(e=>{var t=JSON.stringify(e.data,null,2),s=window.open();s.document.open(),s.document.write("<html><body><pre>"+t+"</pre></body></html>"),s.document.close()})}}},me=he,fe=(s("f12a"),Object(f["a"])(me,n,a,!1,null,null,null));t["default"]=fe.exports},b5df:function(e,t,s){},b707:function(e,t,s){"use strict";var n=function(e,t){var s=t._c;return s("b-button",{staticClass:"pryv-btn-style mt-2",attrs:{variant:t.props.variant?t.props.variant:"danger",type:t.props.type,disabled:!!t.props.disabled&&t.props.disabled},on:{click:t.listeners.click}},[t.props.icon?s("b-icon",{attrs:{icon:t.props.icon,"font-scale":"1"}}):t._e(),t._v(" "+t._s(t.props.content))],1)},a=[],i={name:"PryvBtn"},r=i,o=s("2877"),l=Object(o["a"])(r,n,a,!0,null,null,null);t["a"]=l.exports},b8fc:function(e,t,s){"use strict";const n=[{method:"getAccessInfo",params:{}}],a=[{method:"events.get",params:{}}],i=[{method:"streams.get",params:{}}],r=[{method:"streams.create",params:{}}],o=[{method:"events.create",params:{}}],l=[{method:"streams.update",params:{}}],c=[{method:"events.update",params:{}}],u=[{method:"streams.delete",params:{}}];t["a"]={ACCESS_INFO_API:n,GET_EVENTS_API:a,GET_STREAMS_API:i,CREATE_EVENT_API:o,UPDATE_STREAM_API:l,DELETE_STREAM_API:u,UPDATE_EVENT_API:c,CREATE_STREAM_API:r}},bb51:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"bg-white shadow w-75 p-3"},[s("b-row",{staticClass:"align-items-center"},[s("b-col",{attrs:{cols:"12"}},[s("h3",[e._v("Swiss-made Personal Data & Privacy Management Software")])])],1),s("b-row",{staticClass:"align-items-center"},[s("b-col",{attrs:{cols:"12"}},[s("img",{attrs:{src:"https://pryv.com/wp-content/themes/pryv2019/assets/img/Illustration-hero.svg",scale:"0",width:"50%",alt:"PRYV"}})])],1),s("b-row",{staticClass:"align-items-center"},[s("b-col",{attrs:{cols:"12"}},[s("h5",[s("b",[e._v("A ready-to-use middleware for personal data and consent management")])]),s("p",[e._v(" Pryv.io is a solid foundation on which you build your own digital health solution, so you can collect, store, share and rightfully use personal data. ")])])],1)],1)},a=[],i=s("2877"),r={},o=Object(i["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},d538:function(e,t,s){!function(t,s){e.exports=s()}(window,(function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=67)}([function(e,t){var s=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=s)},function(e,t,s){var n=s(25)("wks"),a=s(27),i=s(2).Symbol,r="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=r&&i[e]||(r?i:a)("Symbol."+e))}).store=n},function(e,t){var s=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=s)},function(e,t,s){e.exports=!s(8)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,s){var n=s(2),a=s(0),i=s(19),r=s(5),o=s(9),l=function(e,t,s){var c,u,d,p=e&l.F,h=e&l.G,m=e&l.S,f=e&l.P,b=e&l.B,v=e&l.W,y=h?a:a[t]||(a[t]={}),g=y.prototype,S=h?n:m?n[t]:(n[t]||{}).prototype;for(c in h&&(s=t),s)(u=!p&&S&&void 0!==S[c])&&o(y,c)||(d=u?S[c]:s[c],y[c]=h&&"function"!=typeof S[c]?s[c]:b&&u?i(d,n):v&&S[c]==d?function(e){var t=function(t,s,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,s)}return new e(t,s,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):f&&"function"==typeof d?i(Function.call,d):d,f&&((y.virtual||(y.virtual={}))[c]=d,e&l.R&&g&&!g[c]&&r(g,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,s){var n=s(6),a=s(13);e.exports=s(3)?function(e,t,s){return n.f(e,t,a(1,s))}:function(e,t,s){return e[t]=s,e}},function(e,t,s){var n=s(7),a=s(35),i=s(36),r=Object.defineProperty;t.f=s(3)?Object.defineProperty:function(e,t,s){if(n(e),t=i(t,!0),n(s),a)try{return r(e,t,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(e[t]=s.value),e}},function(e,t,s){var n=s(12);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var s={}.hasOwnProperty;e.exports=function(e,t){return s.call(e,t)}},function(e,t,s){var n=s(15);e.exports=function(e){return Object(n(e))}},function(e,t,s){e.exports={default:s(61),__esModule:!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,s){var n=s(38),a=s(28);e.exports=Object.keys||function(e){return n(e,a)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var s=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:s)(e)}},function(e,t,s){var n=s(25)("keys"),a=s(27);e.exports=function(e){return n[e]||(n[e]=a(e))}},function(e,t){e.exports={}},function(e,t,s){var n=s(34);e.exports=function(e,t,s){if(n(e),void 0===t)return e;switch(s){case 1:return function(s){return e.call(t,s)};case 2:return function(s,n){return e.call(t,s,n)};case 3:return function(s,n,a){return e.call(t,s,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t,s){var n=s(12),a=s(2).document,i=n(a)&&n(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},function(e,t,s){var n=s(22),a=s(15);e.exports=function(e){return n(a(e))}},function(e,t,s){var n=s(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var s={}.toString;e.exports=function(e){return s.call(e).slice(8,-1)}},function(e,t,s){var n=s(16),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t,s){var n=s(0),a=s(2),i=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:s(26)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!0},function(e,t){var s=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+n).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,s){var n=s(6).f,a=s(9),i=s(1)("toStringTag");e.exports=function(e,t,s){e&&!a(e=s?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,s){e.exports={default:s(32),__esModule:!0}},function(e,t,s){"use strict";t.__esModule=!0;var n,a=s(43),i=(n=a)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return(0,i.default)(e)}},function(e,t,s){s(33),e.exports=s(0).Object.assign},function(e,t,s){var n=s(4);n(n.S+n.F,"Object",{assign:s(37)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,s){e.exports=!s(3)&&!s(8)((function(){return 7!=Object.defineProperty(s(20)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,s){var n=s(12);e.exports=function(e,t){if(!n(e))return e;var s,a;if(t&&"function"==typeof(s=e.toString)&&!n(a=s.call(e)))return a;if("function"==typeof(s=e.valueOf)&&!n(a=s.call(e)))return a;if(!t&&"function"==typeof(s=e.toString)&&!n(a=s.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,s){"use strict";var n=s(3),a=s(14),i=s(41),r=s(42),o=s(10),l=s(22),c=Object.assign;e.exports=!c||s(8)((function(){var e={},t={},s=Symbol(),n="abcdefghijklmnopqrst";return e[s]=7,n.split("").forEach((function(e){t[e]=e})),7!=c({},e)[s]||Object.keys(c({},t)).join("")!=n}))?function(e,t){for(var s=o(e),c=arguments.length,u=1,d=i.f,p=r.f;c>u;)for(var h,m=l(arguments[u++]),f=d?a(m).concat(d(m)):a(m),b=f.length,v=0;b>v;)h=f[v++],n&&!p.call(m,h)||(s[h]=m[h]);return s}:c},function(e,t,s){var n=s(9),a=s(21),i=s(39)(!1),r=s(17)("IE_PROTO");e.exports=function(e,t){var s,o=a(e),l=0,c=[];for(s in o)s!=r&&n(o,s)&&c.push(s);for(;t.length>l;)n(o,s=t[l++])&&(~i(c,s)||c.push(s));return c}},function(e,t,s){var n=s(21),a=s(24),i=s(40);e.exports=function(e){return function(t,s,r){var o,l=n(t),c=a(l.length),u=i(r,c);if(e&&s!=s){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===s)return e||u||0;return!e&&-1}}},function(e,t,s){var n=s(16),a=Math.max,i=Math.min;e.exports=function(e,t){return(e=n(e))<0?a(e+t,0):i(e,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,s){e.exports={default:s(44),__esModule:!0}},function(e,t,s){s(45),s(54),e.exports=s(0).Array.from},function(e,t,s){"use strict";var n=s(46)(!0);s(47)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,s=this._i;return s>=t.length?{value:void 0,done:!0}:(e=n(t,s),this._i+=e.length,{value:e,done:!1})}))},function(e,t,s){var n=s(16),a=s(15);e.exports=function(e){return function(t,s){var i,r,o=String(a(t)),l=n(s),c=o.length;return l<0||l>=c?e?"":void 0:(i=o.charCodeAt(l))<55296||i>56319||l+1===c||(r=o.charCodeAt(l+1))<56320||r>57343?e?o.charAt(l):i:e?o.slice(l,l+2):r-56320+(i-55296<<10)+65536}}},function(e,t,s){"use strict";var n=s(26),a=s(4),i=s(48),r=s(5),o=s(18),l=s(49),c=s(29),u=s(53),d=s(1)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,s,m,f,b,v){l(s,t,m);var y,g,S,C=function(e){if(!p&&e in _)return _[e];switch(e){case"keys":case"values":return function(){return new s(this,e)}}return function(){return new s(this,e)}},k=t+" Iterator",T="values"==f,E=!1,_=e.prototype,w=_[d]||_["@@iterator"]||f&&_[f],O=w||C(f),x=f?T?C("entries"):O:void 0,j="Array"==t&&_.entries||w;if(j&&(S=u(j.call(new e)))!==Object.prototype&&S.next&&(c(S,k,!0),n||"function"==typeof S[d]||r(S,d,h)),T&&w&&"values"!==w.name&&(E=!0,O=function(){return w.call(this)}),n&&!v||!p&&!E&&_[d]||r(_,d,O),o[t]=O,o[k]=h,f)if(y={values:T?O:C("values"),keys:b?O:C("keys"),entries:x},v)for(g in y)g in _||i(_,g,y[g]);else a(a.P+a.F*(p||E),t,y);return y}},function(e,t,s){e.exports=s(5)},function(e,t,s){"use strict";var n=s(50),a=s(13),i=s(29),r={};s(5)(r,s(1)("iterator"),(function(){return this})),e.exports=function(e,t,s){e.prototype=n(r,{next:a(1,s)}),i(e,t+" Iterator")}},function(e,t,s){var n=s(7),a=s(51),i=s(28),r=s(17)("IE_PROTO"),o=function(){},l=function(){var e,t=s(20)("iframe"),n=i.length;for(t.style.display="none",s(52).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[i[n]];return l()};e.exports=Object.create||function(e,t){var s;return null!==e?(o.prototype=n(e),s=new o,o.prototype=null,s[r]=e):s=l(),void 0===t?s:a(s,t)}},function(e,t,s){var n=s(6),a=s(7),i=s(14);e.exports=s(3)?Object.defineProperties:function(e,t){a(e);for(var s,r=i(t),o=r.length,l=0;o>l;)n.f(e,s=r[l++],t[s]);return e}},function(e,t,s){var n=s(2).document;e.exports=n&&n.documentElement},function(e,t,s){var n=s(9),a=s(10),i=s(17)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,s){"use strict";var n=s(19),a=s(4),i=s(10),r=s(55),o=s(56),l=s(24),c=s(57),u=s(58);a(a.S+a.F*!s(60)((function(e){Array.from(e)})),"Array",{from:function(e){var t,s,a,d,p=i(e),h="function"==typeof this?this:Array,m=arguments.length,f=m>1?arguments[1]:void 0,b=void 0!==f,v=0,y=u(p);if(b&&(f=n(f,m>2?arguments[2]:void 0,2)),null==y||h==Array&&o(y))for(s=new h(t=l(p.length));t>v;v++)c(s,v,b?f(p[v],v):p[v]);else for(d=y.call(p),s=new h;!(a=d.next()).done;v++)c(s,v,b?r(d,f,[a.value,v],!0):a.value);return s.length=v,s}})},function(e,t,s){var n=s(7);e.exports=function(e,t,s,a){try{return a?t(n(s)[0],s[1]):t(s)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,s){var n=s(18),a=s(1)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[a]===e)}},function(e,t,s){"use strict";var n=s(6),a=s(13);e.exports=function(e,t,s){t in e?n.f(e,t,a(0,s)):e[t]=s}},function(e,t,s){var n=s(59),a=s(1)("iterator"),i=s(18);e.exports=s(0).getIteratorMethod=function(e){if(null!=e)return e[a]||e["@@iterator"]||i[n(e)]}},function(e,t,s){var n=s(23),a=s(1)("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,s,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?s:i?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,s){var n=s(1)("iterator"),a=!1;try{var i=[7][n]();i.return=function(){a=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var s=!1;try{var i=[7],r=i[n]();r.next=function(){return{done:s=!0}},i[n]=function(){return r},e(i)}catch(e){}return s}},function(e,t,s){s(62),e.exports=s(0).Object.keys},function(e,t,s){var n=s(10),a=s(14);s(63)("keys",(function(){return function(e){return a(n(e))}}))},function(e,t,s){var n=s(4),a=s(0),i=s(8);e.exports=function(e,t){var s=(a.Object||{})[e]||Object[e],r={};r[e]=t(s),n(n.S+n.F*i((function(){s(1)})),"Object",r)}},function(e,t,s){var n=s(65);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),(0,s(68).default)("d82ef3d4",n,!0,{})},function(e,t,s){(e.exports=s(66)(!1)).push([e.i,'.vjs-checkbox{position:absolute;left:-30px;color:#1f2d3d;user-select:none}.vjs-checkbox.is-checked .vjs-checkbox__inner{background-color:#1890ff;border-color:#0076e4}.vjs-checkbox.is-checked .vjs-checkbox__inner:after{transform:rotate(45deg) scaleY(1)}.vjs-checkbox .vjs-checkbox__inner{display:inline-block;position:relative;border:1px solid #bfcbd9;border-radius:2px;vertical-align:middle;box-sizing:border-box;width:16px;height:16px;background-color:#fff;z-index:1;cursor:pointer;transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.vjs-checkbox .vjs-checkbox__inner:after{box-sizing:content-box;content:"";border:2px solid #fff;border-left:0;border-top:0;height:8px;left:4px;position:absolute;top:1px;transform:rotate(45deg) scaleY(0);width:4px;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transform-origin:center}.vjs-checkbox .vjs-checkbox__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-radio{position:absolute;left:-30px;color:#1f2d3d;user-select:none}.vjs-radio.is-checked .vjs-radio__inner{background-color:#1890ff;border-color:#0076e4}.vjs-radio.is-checked .vjs-radio__inner:after{transform:translate(-50%,-50%) scale(1)}.vjs-radio .vjs-radio__inner{border:1px solid #bfcbd9;border-radius:100%;width:16px;height:16px;vertical-align:middle;background-color:#fff;position:relative;cursor:pointer;display:inline-block;box-sizing:border-box}.vjs-radio .vjs-radio__inner:after{width:4px;height:4px;border-radius:100%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s ease-in}.vjs-radio .vjs-radio__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-tree{font-family:Monaco,Menlo,Consolas,Bitstream Vera Sans Mono,monospace;font-size:14px}.vjs-tree.is-root{position:relative}.vjs-tree.is-root.has-selectable-control{margin-left:30px}.vjs-tree.is-mouseover{background-color:#e6f7ff}.vjs-tree.is-highlight-selected{background-color:#ccefff}.vjs-tree .vjs-tree__content{padding-left:1em}.vjs-tree .vjs-tree__content.has-line{border-left:1px dotted #bfcbd9}.vjs-tree .vjs-tree__brackets{cursor:pointer}.vjs-tree .vjs-tree__brackets:hover{color:#1890ff}.vjs-tree .vjs-comment{color:#bfcbd9}.vjs-tree .vjs-value__null{color:#ff4949}.vjs-tree .vjs-value__boolean,.vjs-tree .vjs-value__number{color:#1d8ce0}.vjs-tree .vjs-value__string{color:#13ce66}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var i=(s=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+s+"}":s})).join("")},t.i=function(e,s){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(n[i]=!0)}for(a=0;a<e.length;a++){var r=e[a];"number"==typeof r[0]&&n[r[0]]||(s&&!r[2]?r[2]=s:s&&(r[2]="("+r[2]+") and ("+s+")"),t.push(r))}},t}},function(e,t,s){"use strict";s.r(t);var n=s(30),a=s.n(n),i=s(31),r=s.n(i),o=s(11),l=s.n(o);function c(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function u(e,t,s,n,a,i,r,o){var l=typeof(e=e||{}).default;"object"!==l&&"function"!==l||(e=e.default);var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=s,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId=i),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var d=u.render;u.render=function(e,t){return c.call(t),d(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:u}}var d=u({props:{showDoubleQuotes:Boolean,parentData:{type:[String,Number,Boolean,Array,Object],default:null},data:{type:[String,Number,Boolean],default:""},showComma:Boolean,currentKey:{type:[Number,String],default:""},customValueFormatter:{type:Function,default:null}},computed:{valueClass:function(){return"vjs-value vjs-value__"+this.dataType},dataType:function(){return c(this.data)}},methods:{defaultFormatter:function(e){var t=e+"";return"string"===this.dataType&&(t='"'+t+'"'),this.showComma&&(t+=","),t},customFormatter:function(e){return this.customValueFormatter?this.customValueFormatter(e,this.currentKey,this.parentData,this.defaultFormatter(e)):this.defaultFormatter(e)}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._t("default"),e._v(" "),e.customValueFormatter?s("span",{class:e.valueClass,domProps:{innerHTML:e._s(e.customFormatter(e.data))}}):s("span",{class:e.valueClass},[e._v(e._s(e.defaultFormatter(e.data)))])],2)}),[],!1,null,null,null).exports,p=u({props:{value:{type:Boolean,default:!1}},data:function(){return{focus:!1}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{class:["vjs-checkbox",e.value?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[s("span",{staticClass:"vjs-checkbox__inner"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"vjs-checkbox__original",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:[function(t){var s=e.model,n=t.target,a=!!n.checked;if(Array.isArray(s)){var i=e._i(s,null);n.checked?i<0&&(e.model=s.concat([null])):i>-1&&(e.model=s.slice(0,i).concat(s.slice(i+1)))}else e.model=a},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})])}),[],!1,null,null,null).exports,h=u({props:{path:{type:String,default:""},value:{type:String,default:""}},data:function(){return{focus:!1}},computed:{currentPath:function(){return this.path},model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{change:function(){this.$emit("change",this.model)}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",{class:["vjs-radio",e.model===e.currentPath?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[s("span",{staticClass:"vjs-radio__inner"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"vjs-radio__original",attrs:{type:"radio"},domProps:{value:e.currentPath,checked:e._q(e.model,e.currentPath)},on:{change:[function(t){e.model=e.currentPath},e.change],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})])}),[],!1,null,null,null).exports,m={props:{visible:{required:!0,type:Boolean},data:{required:!0},showComma:Boolean,collapsedOnClickBrackets:Boolean},computed:{dataVisiable:{get:function(){return this.visible},set:function(e){this.collapsedOnClickBrackets&&this.$emit("update:visible",e)}}},methods:{toggleBrackets:function(){this.dataVisiable=!this.dataVisiable},bracketsFormatter:function(e){return this.showComma?e+",":e}}},f=u({mixins:[m],props:{showLength:Boolean},methods:{closedBracketsGenerator:function(e){var t=Array.isArray(e)?"[...]":"{...}";return this.bracketsFormatter(t)},lengthGenerator:function(e){return" // "+(Array.isArray(e)?e.length+" items":l()(e).length+" keys")}}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._t("default"),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.dataVisiable,expression:"dataVisiable"}],staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n    "+e._s(Array.isArray(e.data)?"[":"{")+"\n  ")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.dataVisiable,expression:"!dataVisiable"}]},[s("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n      "+e._s(e.closedBracketsGenerator(e.data))+"\n    ")]),e._v(" "),e.showLength?s("span",{staticClass:"vjs-comment"},[e._v("\n      "+e._s(e.lengthGenerator(e.data))+"\n    ")]):e._e()])],2)}),[],!1,null,null,null).exports,b=u({mixins:[m]},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.dataVisiable,expression:"dataVisiable"}]},[s("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n    "+e._s(e.bracketsFormatter(Array.isArray(e.data)?"]":"}"))+"\n  ")])])}),[],!1,null,null,null),v=u({name:"VueJsonPretty",components:{SimpleText:d,VueCheckbox:p,VueRadio:h,BracketsLeft:f,BracketsRight:b.exports},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},path:{type:String,default:"root"},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},value:{type:[Array,String],default:function(){return""}},pathSelectable:{type:Function,default:function(){return!0}},highlightMouseoverNode:{type:Boolean,default:!1},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null},parentData:{type:[String,Number,Boolean,Array,Object],default:null},currentDeep:{type:Number,default:1},currentKey:{type:[Number,String],default:""}},data:function(){return{visible:this.currentDeep<=this.deep,isMouseover:!1,currentCheckboxVal:!!Array.isArray(this.value)&&this.value.includes(this.path)}},computed:{model:{get:function(){var e="multiple"===this.selectableType?[]:"single"===this.selectableType?"":null;return this.value||e},set:function(e){this.$emit("input",e)}},lastKey:function(){if(Array.isArray(this.parentData))return this.parentData.length-1;if(this.isObject(this.parentData)){var e=l()(this.parentData);return e[e.length-1]}return""},notLastKey:function(){return this.currentKey!==this.lastKey},selectable:function(){return this.pathSelectable(this.path,this.data)&&(this.isMultiple||this.isSingle)},isMultiple:function(){return"multiple"===this.selectableType},isSingle:function(){return"single"===this.selectableType},isSelected:function(){return this.isMultiple?this.model.includes(this.path):!!this.isSingle&&this.model===this.path},propsError:function(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{deep:function(e){this.visible=this.currentDeep<=e},propsError:{handler:function(e){if(e)throw new Error("[vue-json-pretty] "+e)},immediate:!0}},methods:{handleValueChange:function(e){var t=this;if(!this.isMultiple||"checkbox"!==e&&"tree"!==e){if(this.isSingle&&("radio"===e||"tree"===e)&&this.model!==this.path){var s=this.model,n=this.path;this.model=n,this.$emit("change",n,s)}}else{var a=this.model.findIndex((function(e){return e===t.path})),i=[].concat(r()(this.model));-1!==a?this.model.splice(a,1):this.model.push(this.path),"checkbox"!==e&&(this.currentCheckboxVal=!this.currentCheckboxVal),this.$emit("change",this.model,i)}},handleClick:function(e){e._uid&&e._uid!==this._uid||(e._uid=this._uid,this.$emit("click",this.path,this.data),this.selectable&&this.selectOnClickNode&&this.handleValueChange("tree"))},handleItemClick:function(e,t){this.$emit("click",e,t)},handleItemChange:function(e,t){this.selectable&&this.$emit("change",e,t)},handleMouseover:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!0)},handleMouseout:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!1)},isObject:function(e){return"object"===c(e)},keyFormatter:function(e){return this.showDoubleQuotes?'"'+e+'"':e}},errorCaptured:function(){return!1}},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"vjs-tree":!0,"has-selectable-control":e.isMultiple||e.showSelectController,"is-root":1===e.currentDeep,"is-selectable":e.selectable,"is-selected":e.isSelected,"is-highlight-selected":e.isSelected&&e.highlightSelectedNode,"is-mouseover":e.isMouseover},on:{click:e.handleClick,mouseover:function(t){return t.stopPropagation(),e.handleMouseover(t)},mouseout:function(t){return t.stopPropagation(),e.handleMouseout(t)}}},[e.showSelectController&&e.selectable?[e.isMultiple?s("vue-checkbox",{on:{change:function(t){return e.handleValueChange("checkbox")}},model:{value:e.currentCheckboxVal,callback:function(t){e.currentCheckboxVal=t},expression:"currentCheckboxVal"}}):e.isSingle?s("vue-radio",{attrs:{path:e.path},on:{change:function(t){return e.handleValueChange("radio")}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e()]:e._e(),e._v(" "),Array.isArray(e.data)||e.isObject(e.data)?[s("brackets-left",{attrs:{visible:e.visible,data:e.data,"show-length":e.showLength,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,"show-comma":e.notLastKey},on:{"update:visible":function(t){e.visible=t}}},[e.currentDeep>1&&!Array.isArray(e.parentData)?s("span",{staticClass:"vjs-key"},[e._v("\n        "+e._s(e.keyFormatter(e.currentKey))+":\n      ")]):e._e()]),e._v(" "),e._l(e.data,(function(t,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],key:n,class:{"vjs-tree__content":!0,"has-line":e.showLine}},[s("vue-json-pretty",{attrs:{"parent-data":e.data,data:t,deep:e.deep,"show-length":e.showLength,"show-double-quotes":e.showDoubleQuotes,"show-line":e.showLine,"highlight-mouseover-node":e.highlightMouseoverNode,"highlight-selected-node":e.highlightSelectedNode,path:e.path+(Array.isArray(e.data)?"["+n+"]":"."+n),"path-selectable":e.pathSelectable,"selectable-type":e.selectableType,"show-select-controller":e.showSelectController,"select-on-click-node":e.selectOnClickNode,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,"current-key":n,"current-deep":e.currentDeep+1,"custom-value-formatter":e.customValueFormatter},on:{click:e.handleItemClick,change:e.handleItemChange},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)})),e._v(" "),s("brackets-right",{attrs:{visible:e.visible,data:e.data,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,"show-comma":e.notLastKey},on:{"update:visible":function(t){e.visible=t}}})]:s("simple-text",{attrs:{"custom-value-formatter":e.customValueFormatter,"show-double-quotes":e.showDoubleQuotes,"show-comma":e.notLastKey,"parent-data":e.parentData,data:e.data,"current-key":e.currentKey}},[e.parentData&&e.currentKey&&!Array.isArray(e.parentData)?s("span",{staticClass:"vjs-key"},[e._v("\n      "+e._s(e.keyFormatter(e.currentKey))+":\n    ")]):e._e()])],2)}),[],!1,null,null,null).exports;s(64),t.default=a()({},v,{version:"1.6.7"})},function(e,t,s){"use strict";function n(e,t){for(var s=[],n={},a=0;a<t.length;a++){var i=t[a],r=i[0],o={id:e+":"+a,css:i[1],media:i[2],sourceMap:i[3]};n[r]?n[r].parts.push(o):s.push(n[r]={id:r,parts:[o]})}return s}s.r(t),s.d(t,"default",(function(){return h}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},r=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,c=!1,u=function(){},d=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,s,a){c=s,d=a||{};var r=n(e,t);return m(r),function(t){for(var s=[],a=0;a<r.length;a++){var o=r[a];(l=i[o.id]).refs--,s.push(l)}for(t?m(r=n(e,t)):r=[],a=0;a<s.length;a++){var l;if(0===(l=s[a]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function m(e){for(var t=0;t<e.length;t++){var s=e[t],n=i[s.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](s.parts[a]);for(;a<s.parts.length;a++)n.parts.push(b(s.parts[a]));n.parts.length>s.parts.length&&(n.parts.length=s.parts.length)}else{var r=[];for(a=0;a<s.parts.length;a++)r.push(b(s.parts[a]));i[s.id]={id:s.id,refs:1,parts:r}}}}function f(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function b(e){var t,s,n=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(n){if(c)return u;n.parentNode.removeChild(n)}if(p){var a=l++;n=o||(o=f()),t=g.bind(null,n,a,!1),s=g.bind(null,n,a,!0)}else n=f(),t=S.bind(null,n),s=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else s()}}var v,y=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function g(e,t,s,n){var a=s?"":n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,a);else{var i=document.createTextNode(a),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function S(e,t){var s=t.css,n=t.media,a=t.sourceMap;if(n&&e.setAttribute("media",n),d.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),a&&(s+="\n/*# sourceURL="+a.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}}])}))},d6db:function(e,t,s){"use strict";var n=s("e67a"),a=s.n(n);a.a},de26:function(e,t,s){},deb0:function(e,t,s){},e67a:function(e,t,s){},eb87:function(e,t,s){},ecdf:function(e,t,s){"use strict";var n=s("eb87"),a=s.n(n);a.a},f12a:function(e,t,s){"use strict";var n=s("4135"),a=s.n(n);a.a},f41c:function(e,t,s){"use strict";var n=s("4628"),a=s.n(n);a.a},fbeb:function(e,t,s){"use strict";var n=s("56fb"),a=s.n(n);a.a},fe17:function(e,t,s){"use strict";var n=s("b5df"),a=s.n(n);a.a}}]);
//# sourceMappingURL=login.65920f75.js.map